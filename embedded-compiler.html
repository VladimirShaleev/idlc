<!-- HTML header for doxygen 1.12.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>idlc: Embedded Compiler</title>
<link rel="icon" href="icon.svg" type="image/svg+xml" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/c.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/cmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/cpp.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/json.min.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
    document.addEventListener('DOMContentLoaded', () => {
        hljs.registerLanguage('cmake-ext', (hljs) => {
            const cmakeLanguage = hljs.getLanguage('cmake');
            return {
                name: "CMakeExt",
                aliases: cmakeLanguage.aliases,
                case_insensitive: cmakeLanguage.case_insensitive,
                contains: cmakeLanguage.contains,
                keywords: {
                    keyword: cmakeLanguage.keywords.keyword + ' ' + 'idlc_compile'
                }
            };
        });
        hljs.registerLanguage('idl', (hljs) => {
            const KEYWORDS = {
                keyword: 'api enum const struct field interface method arg prop event handle func callback import'
            }
            const DOCUMENTATION = {
                className: 'comment',
                begin: '@\\s*(\\w+)?',
                end: '(?=\\n|$)',
                contains: [
                    {
                        className: 'attribute',
                        begin: '\\{',
                        end: '\\}'
                    },
                    {
                        className: 'symbol',
                        begin: '\\[',
                        end: '\\]'
                    }
                ]
            };
            const MDOCUMENTATION = {
                className: 'comment',
                begin: '@\\s*```',
                end: '```',
                contains: [
                    {
                        className: 'attribute',
                        begin: '\\{',
                        end: '\\}'
                    },
                    {
                        className: 'symbol',
                        begin: '\\[',
                        end: '\\]'
                    }
                ]
            };
            const LITERAL = {
                className: 'type',
                begin: ':\\s*\\d+',
                end: '(?=\\n|$|@|\\[)'
            };
            const LITERAL_REF = {
                className: 'attribute',
                begin: ':\\s*\\w+',
                end: '(?=\\n|$|@|\\[)'
            };
            const TYPE = {
                className: 'attribute',
                begin: '\\{',
                end: '\\}'
            };
            const ATTRIBUTE = {
                className: 'symbol',
                begin: '\\[',
                end: '\\]',
                contains: [
                    {
                        className: 'type',
                        begin: '\\(\\s*\\d+',
                        end: '\\)'
                    },
                    {
                        className: 'attribute',
                        begin: '\\(\\s*\\w+',
                        end: '\\)'
                    }
                ]
            };
            return {
                name: "IDL",
                case_insensitive: false,
                keywords: KEYWORDS,
                contains: [
                    DOCUMENTATION,
                    MDOCUMENTATION,
                    TYPE,
                    ATTRIBUTE,
                    LITERAL,
                    LITERAL_REF
                ]
            };
        });
    });
    $(function() {
        $(document).ready(function() {
            if(navigator.clipboard) {
                const fragments = document.getElementsByClassName("hljs")
                for(const fragment of fragments) {
                    const fragmentWrapper = document.createElement("div")
                    fragmentWrapper.className = "doxygen-awesome-fragment-wrapper"
                    const fragmentCopyButton = document.createElement("doxygen-awesome-fragment-copy-button")
                    fragmentCopyButton.innerHTML = DoxygenAwesomeFragmentCopyButton.copyIcon
                    fragmentCopyButton.title = DoxygenAwesomeFragmentCopyButton.title
                    fragment.parentNode.replaceChild(fragmentWrapper, fragment)
                    fragmentWrapper.appendChild(fragment)
                    fragmentWrapper.appendChild(fragmentCopyButton)
                }
            }
        })
    })
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign">
   <div id="projectname">idlc<span id="projectnumber">&#160;1.5.12</span>
   </div>
   <div id="projectbrief">Interface Definition Language Compiler</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('embedded-compiler.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Embedded Compiler</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul>
  <li class="level1">
    <a href="#using-embedded-compiler">Using the Embedded Сompiler</a>
    <ul>
      <li class="level2">
        <a href="#javascript-guide">JavaScript</a>
        <ul>
          <li class="level3">
            <a href="#install-npm-package">Install the NPM Package</a>
          </li>
          <li class="level3">
            <a href="#using-compiler-in-js">Using the Embedded Compiler</a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#c-guide">C</a>
        <ul>
          <li class="level3">
            <a href="#install-vcpkg-port">Install the Vcpkg Port</a>
          </li>
          <li class="level3">
            <a href="#using-compiler-in-cpp">Using the Embedded Compiler</a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#learn-documentation">Next Steps</a>
      </li>
    </ul>
  </li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="using-embedded-compiler"></a>
Using the Embedded Сompiler</h1>
<p>This section covers how to integrate the built-in compiler and use the API.</p>
<h2><a class="anchor" id="javascript-guide"></a>
JavaScript</h2>
<h3><a class="anchor" id="install-npm-package"></a>
Install the NPM Package</h3>
<dl class="section note"><dt>Note</dt><dd>I haven’t published the package to npmjs. Instead, it’s hosted in a public <b>GitHub</b> repository. You’ll need to:<ul>
<li>Add the <b>GitHub</b> repository to your <code>.npmrc</code> under the <code>NAMESPACE</code> <code>vladimirshaleev</code> (<a href="https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-npm-registry#installing-a-package">GitHub repo setup</a>).</li>
<li>Authenticate with <b>GitHub</b> to access GitHub repositories (<a href="https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-npm-registry#authenticating-to-github-packages">GitHub auth</a>).</li>
<li>Create an empty project (e.g., in a folder like <code>test-js</code>). Inside it, generate a package.json by running <code>npm init</code>.</li>
<li>Then, add the <b>idlc</b> npm package as a dependency: <div class="fragment"><div class="line">@bash</div>
<div class="line">npm install @vladimirshaleev/idlc</div>
</div><!-- fragment --> <details >
<summary >
After this, your <code>package.json</code> might look like this:</summary>
<p></p>
<div class="fragment"><div class="line">@json</div>
<div class="line">{</div>
<div class="line">  &quot;name&quot;: &quot;test-js&quot;,</div>
<div class="line">  &quot;main&quot;: &quot;index.js&quot;,</div>
<div class="line">  &quot;type&quot;: &quot;module&quot;,</div>
<div class="line">  &quot;description&quot;: &quot;&quot;,</div>
<div class="line">  &quot;dependencies&quot;: {</div>
<div class="line">    &quot;@vladimirshaleev/idlc&quot;: &quot;^1.5.12&quot;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> </details>
</li>
</ul>
</dd></dl>
<h3><a class="anchor" id="using-compiler-in-js"></a>
Using the Embedded Compiler</h3>
<p>Now, in <code>index.js</code>, you can add the following code:</p>
<div class="fragment"><div class="line">@javascript</div>
<div class="line">import idlcInit from &#39;@vladimirshaleev/idlc&#39;;</div>
<div class="line"> </div>
<div class="line">const idlc = await idlcInit();</div>
<div class="line"> </div>
<div class="line">const compiledCodes = {};</div>
<div class="line"> </div>
<div class="line">const options = new idlc.Options;</div>
<div class="line">options.warningsAsErrors = false;</div>
<div class="line">options.writer = function (source) {</div>
<div class="line">    compiledCodes[source.name] = source.data;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">const source = {</div>
<div class="line">    name: &quot;myfile&quot;,</div>
<div class="line">    data: `</div>
<div class="line">        @ API Sample</div>
<div class="line">        api Sample</div>
<div class="line"> </div>
<div class="line">        @ Sum of all values.</div>
<div class="line">        @ Return sum. [return]</div>
<div class="line">        func Sum {Float32}</div>
<div class="line">            arg Values {Float32} [const,array(Count)] @ Array of values.</div>
<div class="line">            arg Count {Uint32} @ Count of {Values}.</div>
<div class="line">        `</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">const compiler = new idlc.Compiler;</div>
<div class="line">const result = compiler.compile(idlc.Generator.C, undefined, [source], options);</div>
<div class="line"> </div>
<div class="line">result.messages.forEach(message =&gt; {</div>
<div class="line">    const prefx = `${message.isError ? &quot;error&quot; : &quot;warning&quot;}`;</div>
<div class="line">    const code = `${message.status.value &lt; 2000 ? &quot;W&quot; : &quot;E&quot;}${message.status.value}`;</div>
<div class="line">    const place = `${message.filename}:${message.line}:${message.column}`;</div>
<div class="line">    console.log(`${prefx} [${code}]: ${message.message} at ${place}`)</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">result.delete();</div>
<div class="line">compiler.delete();</div>
<div class="line">options.delete();</div>
<div class="line"> </div>
<div class="line">console.log(`total files ${Object.keys(compiledCodes).length}`);</div>
<div class="line">for (const [filename, code] of Object.entries(compiledCodes)) {</div>
<div class="line">    console.log(`file: ${filename}`);</div>
<div class="line">    console.log(`code:\n${code}`);</div>
<div class="line">}</div>
</div><!-- fragment --><p>As we can see, the JavaScript API created by IDLC can work with lambda expressions, closures, properties, and JavaScript arrays.</p>
<h2><a class="anchor" id="c-guide"></a>
C</h2>
<h3><a class="anchor" id="install-vcpkg-port"></a>
Install the Vcpkg Port</h3>
<p>The port is located in a custom registry. To add the custom registry, include the following registry with the <b>idlc</b> port in your <code>vcpkg-configuration.json</code> (in the same directory as your <code>vcpkg.json</code>):</p>
<div class="fragment"><div class="line">@json</div>
<div class="line">{</div>
<div class="line">  &quot;$schema&quot;: &quot;https://raw.githubusercontent.com/microsoft/vcpkg-tool/main/docs/vcpkg-configuration.schema.json&quot;,</div>
<div class="line">  &quot;default-registry&quot;: {</div>
<div class="line">    &quot;kind&quot;: &quot;git&quot;,</div>
<div class="line">    &quot;baseline&quot;: &quot;0cf34c184ce990471435b5b9c92edcf7424930b1&quot;,</div>
<div class="line">    &quot;repository&quot;: &quot;https://github.com/microsoft/vcpkg&quot;</div>
<div class="line">  },</div>
<div class="line">  &quot;registries&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;kind&quot;: &quot;git&quot;,</div>
<div class="line">      &quot;baseline&quot;: &quot;466d36bf27d03a502568a473b1f37b855dd5ae07&quot;,</div>
<div class="line">      &quot;reference&quot;: &quot;vcpkg-registry&quot;,</div>
<div class="line">      &quot;repository&quot;: &quot;https://github.com/VladimirShaleev/idlc&quot;,</div>
<div class="line">      &quot;packages&quot;: [</div>
<div class="line">        &quot;idlc&quot;</div>
<div class="line">      ]</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><p>After that, you can add the dependency to your <code>vcpkg.json</code>:</p>
<div class="fragment"><div class="line">@json</div>
<div class="line">{</div>
<div class="line">  &quot;$schema&quot;: &quot;https://raw.githubusercontent.com/microsoft/vcpkg-tool/main/docs/vcpkg.schema.json&quot;,</div>
<div class="line">  &quot;name&quot;: &quot;test-c&quot;,</div>
<div class="line">  &quot;dependencies&quot;: [</div>
<div class="line">    &quot;idlc&quot;</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>For information on using <b>vcpkg</b>, refer to the <a href="https://learn.microsoft.com/vcpkg/">official website</a></dd></dl>
<p>Add the following configuration to your <code>CMakeLists.txt</code>:</p>
<div class="fragment"><div class="line">@cmake</div>
<div class="line">cmake_minimum_required(VERSION 3.16)</div>
<div class="line"> </div>
<div class="line">project(test-c CXX)</div>
<div class="line"> </div>
<div class="line">find_package(idlc CONFIG REQUIRED)</div>
<div class="line"> </div>
<div class="line">add_executable(test-c main.cpp)</div>
<div class="line">target_link_libraries(test-c PRIVATE idlc::idl)</div>
<div class="line">target_compile_features(test-c PRIVATE cxx_std_17)</div>
</div><!-- fragment --><h3><a class="anchor" id="using-compiler-in-cpp"></a>
Using the Embedded Compiler</h3>
<p>Now you can add the following code to <code>main.cpp</code>, which is functionally similar to the code above for JavaScript:</p>
<div class="fragment"><div class="line">@cpp</div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="idl_8h.html">idlc/idl.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> check(<a class="code hl_enumeration" href="group__enums.html#gacb465e5698f0b0cf6d5f1c569614b02a">idl_result_t</a> code)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (code != <a class="code hl_enumvalue" href="group__enums.html#ggacb465e5698f0b0cf6d5f1c569614b02aa7e75bc865ae4c7b6d7bbf2637fe5b062">IDL_RESULT_SUCCESS</a>)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">throw</span> std::runtime_error(std::string(<span class="stringliteral">&quot;error: &quot;</span>) + <a class="code hl_function" href="group__functions.html#gaefd8e8c6d3028fcc1c3e09c721e5f692">idl_result_to_string</a>(code));</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_typedef" href="group__types.html#gac5201196b15ac17fc878c761db2d6f18">idl_options_t</a> options{};</div>
<div class="line">    <a class="code hl_typedef" href="group__types.html#gaf70fec24227498a2b55d6e92f04da5ec">idl_compiler_t</a> compiler{};</div>
<div class="line">    <a class="code hl_typedef" href="group__types.html#gaae7a5f15067b6346b2fdd86532d36826">idl_compilation_result_t</a> result{};</div>
<div class="line">    <span class="keywordtype">int</span> exitCode{};</div>
<div class="line">    std::map&lt;std::string, std::string&gt; compiledCodes{};</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        check(<a class="code hl_function" href="group__functions.html#gaf7ee43f5abeaffad8c3a139fddfc8c62">idl_options_create</a>(&amp;options));</div>
<div class="line">        <a class="code hl_function" href="group__functions.html#ga3ffe8d0fdb472662c85c6bdf7e7dc041">idl_options_set_warnings_as_errors</a>(options, 0);</div>
<div class="line">        <a class="code hl_function" href="group__functions.html#ga2cd59528c3a374b9e46029b22a6a46f9">idl_options_set_writer</a>(options, [](<span class="keyword">const</span> <a class="code hl_struct" href="structidl__source__t.html">idl_source_t</a> *source, <a class="code hl_typedef" href="group__types.html#ga39bbd0e385274ce71db46a85c86ebce0">idl_data_t</a> data)</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">auto</span> &amp;compiledCodes = *<span class="keyword">static_cast&lt;</span>std::map&lt;std::string, std::string&gt;*<span class="keyword">&gt;</span>(data);</div>
<div class="line">            compiledCodes[source-&gt;<a class="code hl_variable" href="structidl__source__t.html#ae3ee563841cfba337c855c1e111035ab">name</a>] = std::string(source-&gt;<a class="code hl_variable" href="structidl__source__t.html#afd03a7592ece79a3a0c0cae6c2950630">data</a>, source-&gt;<a class="code hl_variable" href="structidl__source__t.html#a77b2c12e575b7ad1346fbe12ca1f64cc">size</a>);</div>
<div class="line">        }, &amp;compiledCodes);</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">constexpr</span> <span class="keywordtype">char</span> sourceCode[] = R<span class="stringliteral">&quot;(</span></div>
<div class="line"><span class="stringliteral">            @ API Sample</span></div>
<div class="line"><span class="stringliteral">            api Sample</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">            @ Sum of all values.</span></div>
<div class="line"><span class="stringliteral">            @ Return sum. [return]</span></div>
<div class="line"><span class="stringliteral">            func Sum {Float32}</span></div>
<div class="line"><span class="stringliteral">                arg Values {Float32} [const,array(Count)] @ Array of values.</span></div>
<div class="line"><span class="stringliteral">                arg Count {Uint32} @ Count of {Values}.</span></div>
<div class="line"><span class="stringliteral">        )&quot;;</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        <a class="code hl_struct" href="structidl__source__t.html">idl_source_t</a> source{};</span></div>
<div class="line"><span class="stringliteral">        source.<a class="code hl_variable" href="structidl__source__t.html#ae3ee563841cfba337c855c1e111035ab">name</a> = </span><span class="stringliteral">&quot;myfile&quot;</span>;</div>
<div class="line">        source.<a class="code hl_variable" href="structidl__source__t.html#afd03a7592ece79a3a0c0cae6c2950630">data</a> = sourceCode;</div>
<div class="line">        source.<a class="code hl_variable" href="structidl__source__t.html#a77b2c12e575b7ad1346fbe12ca1f64cc">size</a> = (<a class="code hl_typedef" href="group__types.html#gaf5b43004febcb29388035843751c7409">idl_uint32_t</a>)std::size(sourceCode) - 1;</div>
<div class="line"> </div>
<div class="line">        check(<a class="code hl_function" href="group__functions.html#gabf970b9fa31c7acc7eaa31e75ce26515">idl_compiler_create</a>(&amp;compiler));</div>
<div class="line">        check(<a class="code hl_function" href="group__functions.html#gacdcb2f1faedbdfbebe2324025f19bf33">idl_compiler_compile</a>(compiler, <a class="code hl_enumvalue" href="group__enums.html#gga6aafad650316a600c79c655f92f70f3da2b61bd4e073e1b1e86b12865c12e886b">IDL_GENERATOR_C</a>, <span class="keyword">nullptr</span>, 1, &amp;source, options, &amp;result));</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_typedef" href="group__types.html#gaf5b43004febcb29388035843751c7409">idl_uint32_t</a> messageCount{};</div>
<div class="line">        <a class="code hl_function" href="group__functions.html#ga59a4c1b6ae5f058bb4981e763ffdcc81">idl_compilation_result_get_messages</a>(result, &amp;messageCount, <span class="keyword">nullptr</span>);</div>
<div class="line"> </div>
<div class="line">        std::vector&lt;idl_message_t&gt; messages;</div>
<div class="line">        messages.resize(<span class="keywordtype">size_t</span>(messageCount));</div>
<div class="line">        <a class="code hl_function" href="group__functions.html#ga59a4c1b6ae5f058bb4981e763ffdcc81">idl_compilation_result_get_messages</a>(result, &amp;messageCount, messages.data());</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;message : messages)</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">auto</span>&amp; stream = message.is_error ? std::cerr : std::cout;</div>
<div class="line">            stream &lt;&lt; (message.is_error ? <span class="stringliteral">&quot;error&quot;</span> : <span class="stringliteral">&quot;warning&quot;</span>) &lt;&lt; <span class="stringliteral">&quot; [&quot;</span>;</div>
<div class="line">            stream &lt;&lt; ((int)message.status &gt;= <a class="code hl_enumvalue" href="group__enums.html#ggafaa1e8a882252cd7f944b4c7a5415072a284d7992f0546570ad0396f7593cd258">IDL_STATUS_E2001</a> ? <span class="charliteral">&#39;E&#39;</span> : <span class="charliteral">&#39;W&#39;</span>) &lt;&lt; (<span class="keywordtype">int</span>)message.status &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span>;</div>
<div class="line">            stream &lt;&lt; message.message &lt;&lt; <span class="stringliteral">&quot; at &quot;</span>;</div>
<div class="line">            stream &lt;&lt; message.filename &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; message.line &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; message.column &lt;&lt; std::endl;</div>
<div class="line">        }</div>
<div class="line">        exitCode = <a class="code hl_function" href="group__functions.html#ga1a3ae24f473a344936f136fd9798a28c">idl_compilation_result_has_errors</a>(result) ? 1 : 0;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;exc)</div>
<div class="line">    {</div>
<div class="line">        std::cerr &lt;&lt; exc.what() &lt;&lt; std::endl;</div>
<div class="line">        exitCode = 1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group__functions.html#ga30a51b3ff2603b72ca340f8179b9d843">idl_compilation_result_destroy</a>(result);</div>
<div class="line">    <a class="code hl_function" href="group__functions.html#ga13cf826ea7f0d49830f92f620a09b0c1">idl_compiler_destroy</a>(compiler);</div>
<div class="line">    <a class="code hl_function" href="group__functions.html#ga15060aaf5bc9e7ad2f40c86590d9f740">idl_options_destroy</a>(options);</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;total files &quot;</span> &lt;&lt; compiledCodes.size() &lt;&lt; std::endl;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;[filename, code] : compiledCodes)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;file: &quot;</span> &lt;&lt; filename &lt;&lt; std::endl;</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;code:&quot;</span> &lt;&lt; std::endl &lt;&lt; code &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> exitCode;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__enums_html_gacb465e5698f0b0cf6d5f1c569614b02a"><div class="ttname"><a href="group__enums.html#gacb465e5698f0b0cf6d5f1c569614b02a">idl_result_t</a></div><div class="ttdeci">idl_result_t</div><div class="ttdoc">Result codes.</div><div class="ttdef"><b>Definition</b> idl-results.h:23</div></div>
<div class="ttc" id="agroup__enums_html_gga6aafad650316a600c79c655f92f70f3da2b61bd4e073e1b1e86b12865c12e886b"><div class="ttname"><a href="group__enums.html#gga6aafad650316a600c79c655f92f70f3da2b61bd4e073e1b1e86b12865c12e886b">IDL_GENERATOR_C</a></div><div class="ttdeci">@ IDL_GENERATOR_C</div><div class="ttdoc">C generator.</div><div class="ttdef"><b>Definition</b> idl.h:50</div></div>
<div class="ttc" id="agroup__enums_html_ggacb465e5698f0b0cf6d5f1c569614b02aa7e75bc865ae4c7b6d7bbf2637fe5b062"><div class="ttname"><a href="group__enums.html#ggacb465e5698f0b0cf6d5f1c569614b02aa7e75bc865ae4c7b6d7bbf2637fe5b062">IDL_RESULT_SUCCESS</a></div><div class="ttdeci">@ IDL_RESULT_SUCCESS</div><div class="ttdoc">Indicates success (this is not an error).</div><div class="ttdef"><b>Definition</b> idl-results.h:24</div></div>
<div class="ttc" id="agroup__enums_html_ggafaa1e8a882252cd7f944b4c7a5415072a284d7992f0546570ad0396f7593cd258"><div class="ttname"><a href="group__enums.html#ggafaa1e8a882252cd7f944b4c7a5415072a284d7992f0546570ad0396f7593cd258">IDL_STATUS_E2001</a></div><div class="ttdeci">@ IDL_STATUS_E2001</div><div class="ttdoc">Unexpected character.</div><div class="ttdef"><b>Definition</b> idl-results.h:43</div></div>
<div class="ttc" id="agroup__functions_html_ga13cf826ea7f0d49830f92f620a09b0c1"><div class="ttname"><a href="group__functions.html#ga13cf826ea7f0d49830f92f620a09b0c1">idl_compiler_destroy</a></div><div class="ttdeci">void idl_compiler_destroy(idl_compiler_t compiler)</div><div class="ttdoc">Releases compiler instance.</div></div>
<div class="ttc" id="agroup__functions_html_ga15060aaf5bc9e7ad2f40c86590d9f740"><div class="ttname"><a href="group__functions.html#ga15060aaf5bc9e7ad2f40c86590d9f740">idl_options_destroy</a></div><div class="ttdeci">void idl_options_destroy(idl_options_t options)</div><div class="ttdoc">Releases options instance.</div></div>
<div class="ttc" id="agroup__functions_html_ga1a3ae24f473a344936f136fd9798a28c"><div class="ttname"><a href="group__functions.html#ga1a3ae24f473a344936f136fd9798a28c">idl_compilation_result_has_errors</a></div><div class="ttdeci">idl_bool_t idl_compilation_result_has_errors(idl_compilation_result_t compilation_result)</div><div class="ttdoc">Checking if there were errors.</div></div>
<div class="ttc" id="agroup__functions_html_ga2cd59528c3a374b9e46029b22a6a46f9"><div class="ttname"><a href="group__functions.html#ga2cd59528c3a374b9e46029b22a6a46f9">idl_options_set_writer</a></div><div class="ttdeci">void idl_options_set_writer(idl_options_t options, idl_write_callback_t callback, idl_data_t data)</div><div class="ttdoc">Set write callback.</div></div>
<div class="ttc" id="agroup__functions_html_ga30a51b3ff2603b72ca340f8179b9d843"><div class="ttname"><a href="group__functions.html#ga30a51b3ff2603b72ca340f8179b9d843">idl_compilation_result_destroy</a></div><div class="ttdeci">void idl_compilation_result_destroy(idl_compilation_result_t compilation_result)</div><div class="ttdoc">Releases compilation result instance.</div></div>
<div class="ttc" id="agroup__functions_html_ga3ffe8d0fdb472662c85c6bdf7e7dc041"><div class="ttname"><a href="group__functions.html#ga3ffe8d0fdb472662c85c6bdf7e7dc041">idl_options_set_warnings_as_errors</a></div><div class="ttdeci">void idl_options_set_warnings_as_errors(idl_options_t options, idl_bool_t enable)</div><div class="ttdoc">Set warning handling setting.</div></div>
<div class="ttc" id="agroup__functions_html_ga59a4c1b6ae5f058bb4981e763ffdcc81"><div class="ttname"><a href="group__functions.html#ga59a4c1b6ae5f058bb4981e763ffdcc81">idl_compilation_result_get_messages</a></div><div class="ttdeci">void idl_compilation_result_get_messages(idl_compilation_result_t compilation_result, idl_uint32_t *message_count, idl_message_t *messages)</div><div class="ttdoc">Returns messages with warnings and errors.</div></div>
<div class="ttc" id="agroup__functions_html_gabf970b9fa31c7acc7eaa31e75ce26515"><div class="ttname"><a href="group__functions.html#gabf970b9fa31c7acc7eaa31e75ce26515">idl_compiler_create</a></div><div class="ttdeci">idl_result_t idl_compiler_create(idl_compiler_t *compiler)</div><div class="ttdoc">Creates new compiler instance.</div></div>
<div class="ttc" id="agroup__functions_html_gacdcb2f1faedbdfbebe2324025f19bf33"><div class="ttname"><a href="group__functions.html#gacdcb2f1faedbdfbebe2324025f19bf33">idl_compiler_compile</a></div><div class="ttdeci">idl_result_t idl_compiler_compile(idl_compiler_t compiler, idl_generator_t generator, idl_utf8_t file, idl_uint32_t source_count, const idl_source_t *sources, idl_options_t options, idl_compilation_result_t *result)</div><div class="ttdoc">Compile IDL.</div></div>
<div class="ttc" id="agroup__functions_html_gaefd8e8c6d3028fcc1c3e09c721e5f692"><div class="ttname"><a href="group__functions.html#gaefd8e8c6d3028fcc1c3e09c721e5f692">idl_result_to_string</a></div><div class="ttdeci">idl_utf8_t idl_result_to_string(idl_result_t result)</div><div class="ttdoc">Converts error code to descriptive string.</div></div>
<div class="ttc" id="agroup__functions_html_gaf7ee43f5abeaffad8c3a139fddfc8c62"><div class="ttname"><a href="group__functions.html#gaf7ee43f5abeaffad8c3a139fddfc8c62">idl_options_create</a></div><div class="ttdeci">idl_result_t idl_options_create(idl_options_t *options)</div><div class="ttdoc">Creates new options instance.</div></div>
<div class="ttc" id="agroup__types_html_ga39bbd0e385274ce71db46a85c86ebce0"><div class="ttname"><a href="group__types.html#ga39bbd0e385274ce71db46a85c86ebce0">idl_data_t</a></div><div class="ttdeci">void * idl_data_t</div><div class="ttdoc">pointer to data.</div><div class="ttdef"><b>Definition</b> idl-platform.h:125</div></div>
<div class="ttc" id="agroup__types_html_gaae7a5f15067b6346b2fdd86532d36826"><div class="ttname"><a href="group__types.html#gaae7a5f15067b6346b2fdd86532d36826">idl_compilation_result_t</a></div><div class="ttdeci">struct _idl_compilation_result * idl_compilation_result_t</div><div class="ttdoc">Compilation result.</div><div class="ttdef"><b>Definition</b> idl-types.h:32</div></div>
<div class="ttc" id="agroup__types_html_gac5201196b15ac17fc878c761db2d6f18"><div class="ttname"><a href="group__types.html#gac5201196b15ac17fc878c761db2d6f18">idl_options_t</a></div><div class="ttdeci">struct _idl_options * idl_options_t</div><div class="ttdoc">Compilation options.</div><div class="ttdef"><b>Definition</b> idl-types.h:33</div></div>
<div class="ttc" id="agroup__types_html_gaf5b43004febcb29388035843751c7409"><div class="ttname"><a href="group__types.html#gaf5b43004febcb29388035843751c7409">idl_uint32_t</a></div><div class="ttdeci">uint32_t idl_uint32_t</div><div class="ttdoc">32 bit unsigned integer.</div><div class="ttdef"><b>Definition</b> idl-platform.h:119</div></div>
<div class="ttc" id="agroup__types_html_gaf70fec24227498a2b55d6e92f04da5ec"><div class="ttname"><a href="group__types.html#gaf70fec24227498a2b55d6e92f04da5ec">idl_compiler_t</a></div><div class="ttdeci">struct _idl_compiler * idl_compiler_t</div><div class="ttdoc">Compiler interface.</div><div class="ttdef"><b>Definition</b> idl-types.h:34</div></div>
<div class="ttc" id="aidl_8h_html"><div class="ttname"><a href="idl_8h.html">idl.h</a></div><div class="ttdoc">IDLC.</div></div>
<div class="ttc" id="astructidl__source__t_html"><div class="ttname"><a href="structidl__source__t.html">idl_source_t</a></div><div class="ttdoc">Source code.</div><div class="ttdef"><b>Definition</b> idl-options.h:22</div></div>
<div class="ttc" id="astructidl__source__t_html_a77b2c12e575b7ad1346fbe12ca1f64cc"><div class="ttname"><a href="structidl__source__t.html#a77b2c12e575b7ad1346fbe12ca1f64cc">idl_source_t::size</a></div><div class="ttdeci">idl_uint32_t size</div><div class="ttdoc">Size of idl_source_t::data in bytes.</div><div class="ttdef"><b>Definition</b> idl-options.h:25</div></div>
<div class="ttc" id="astructidl__source__t_html_ae3ee563841cfba337c855c1e111035ab"><div class="ttname"><a href="structidl__source__t.html#ae3ee563841cfba337c855c1e111035ab">idl_source_t::name</a></div><div class="ttdeci">idl_utf8_t name</div><div class="ttdoc">Source name (used to resolve imports).</div><div class="ttdef"><b>Definition</b> idl-options.h:23</div></div>
<div class="ttc" id="astructidl__source__t_html_afd03a7592ece79a3a0c0cae6c2950630"><div class="ttname"><a href="structidl__source__t.html#afd03a7592ece79a3a0c0cae6c2950630">idl_source_t::data</a></div><div class="ttdeci">const idl_char_t * data</div><div class="ttdoc">Source code.</div><div class="ttdef"><b>Definition</b> idl-options.h:24</div></div>
</div><!-- fragment --><h2><a class="anchor" id="learn-documentation"></a>
Next Steps</h2>
<p>To explore all the compiler's capabilities, check out the documentation at the link below.</p>
<div class="section_buttons"></div><div class="section_buttons"><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Previous   </th><th class="markdownTableHeadRight">Next    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a href="language-guide.html">Language Guide</a>   </td><td class="markdownTableBodyRight"><a href="topics.html">Documentation</a>   </td></tr>
</table>
</div><div class="section_buttons"></div> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.fragment').forEach(fragment => {
      const pre = document.createElement('pre');
      const code = document.createElement('code');
      code.className = 'language-plaintext';
      code.style.whiteSpace = 'pre';
      let skip = false;
      let first = true;
      let codeContent = '';
      fragment.querySelectorAll('.line').forEach(line => {
        if (first) {
          const lang = line.textContent;
          if (lang == '@cmake') {
            code.className = `language-cmake-ext`;
          } else if (lang == '@idl') {
            code.className = `language-idl`;
          } else if (lang == '@json') {
            code.className = `language-json`;
          } else if (lang == '@c') {
            code.className = `language-c`;
          } else if (lang == '@cpp') {
            code.className = `language-cpp`;
          } else if (lang == '@javascript') {
            code.className = `language-javascript`;
          } else if (lang == '@bash') {
            code.className = `language-bash`;
          } else {
            skip = true;
          }
        } else {
          codeContent += line.textContent + '\n';
        }
        first = false;
      });
      if (!skip) {
        code.textContent = codeContent.trimEnd();
        pre.appendChild(code);
        fragment.replaceWith(pre);
      }
    });
    if (typeof hljs !== 'undefined') {
      hljs.highlightAll();
    }
  });
</script>
<!-- HTML footer for doxygen 1.12.0-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer" style="float:left;"><a href="https://github.com/VladimirShaleev/idlc">GitHub Repository</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
