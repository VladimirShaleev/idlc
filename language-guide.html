<!-- HTML header for doxygen 1.12.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>idlc: Language Guide</title>
<link rel="icon" href="icon.svg" type="image/svg+xml" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign">
   <div id="projectname">idlc<span id="projectnumber">&#160;1.5.11</span>
   </div>
   <div id="projectbrief">Interface Definition Language Compiler</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('language-guide.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Language Guide</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul>
  <li class="level1">
    <a href="#idl">Interface Definition Language</a>
    <ul>
      <li class="level2">
        <a href="#declarations">Declarations</a>
      </li>
      <li class="level2">
        <a href="#documentation">Documentation</a>
      </li>
      <li class="level2">
        <a href="#start">Specification Start</a>
      </li>
      <li class="level2">
        <a href="#enumerations">Enumerations</a>
      </li>
      <li class="level2">
        <a href="#builtin-types">Built-in Types</a>
      </li>
      <li class="level2">
        <a href="#structures">Structures</a>
      </li>
      <li class="level2">
        <a href="#functions">Functions</a>
      </li>
      <li class="level2">
        <a href="#interfaces">Interfaces</a>
      </li>
      <li class="level2">
        <a href="#methods">Methods</a>
      </li>
      <li class="level2">
        <a href="#callbacks">Callbacks</a>
      </li>
      <li class="level2">
        <a href="#properties">Properties</a>
      </li>
      <li class="level2">
        <a href="#events">Events</a>
      </li>
      <li class="level2">
        <a href="#import">Import</a>
      </li>
      <li class="level2">
        <a href="#attributes">Attributes</a>
      </li>
      <li class="level2">
        <a href="#error-handling">Error Handling</a>
      </li>
    </ul>
  </li>
  <li class="level1">
    <a href="#using-idlc">Using the idlc Command Line Tool</a>
  </li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="idl"></a>
Interface Definition Language</h1>
<p>This guide describes the use of IDL for creating library specifications, its syntax, and capabilities.</p>
<h2><a class="anchor" id="declarations"></a>
Declarations</h2>
<p>All declarations, whether they're structure declarations or functions and their arguments, must begin with the appropriate keyword followed by the declaration name. Example:</p>
<div class="fragment"><div class="line">@ API Sample</div>
<div class="line">api Sample</div>
<div class="line"> </div>
<div class="line">@ Color values.</div>
<div class="line">struct Color</div>
<div class="line">    field Red @ Red channel clear value.</div>
<div class="line">    field Green @ Green channel clear value.</div>
<div class="line">    field Blue @ Blue channel clear value.</div>
<div class="line">    field Alpha @ Alpha channel clear value.</div>
<div class="line"> </div>
<div class="line">@ Object type</div>
<div class="line">interface Logger</div>
<div class="line">    method TestName [static] @ Detail</div>
</div><!-- fragment --><p>In this example, <code>api</code>, <code>struct</code>, <code>interface</code>, and <code>method</code> are keywords that create declarations. They're followed by the declaration name.</p>
<p>The language requires all names to begin with a capital letter. The main question is how the compiler will represent these names for target languages during compilation? The answer is that naming conventions depend on the target language - for example, C uses snake_case, JS uses camelCase, and C# uses PascalCase.</p>
<p>Let's say we have a method name TestName. The compiler tokenizes it into two words <code>Test</code> and <code>Name</code> based on capital letters and letter-digit-letter transitions. So in C, the name would be:</p>
<div class="fragment"><div class="line">logger_test_name</div>
</div><!-- fragment --><p>and in JS:</p>
<div class="fragment"><div class="line">testName</div>
</div><!-- fragment --><p>Note that C isn't an OOP language, but many C libraries (like cairo, etc.) manually "implement OOP": they add opaque types that are passed as the first parameter in functions (acting as <code>this</code>). The function prefix indicates the "class" name. These opaque types can be implemented in C or even C++, as in this library.</p>
<p>In JS, the interface translates to a JS class with methods and other features.</p>
<dl class="section note"><dt>Note</dt><dd>If default tokenization doesn't work for your case, you can use the <code>[tokenizer]</code> attribute as shown in this TODO section.</dd></dl>
<h2><a class="anchor" id="documentation"></a>
Documentation</h2>
<p>The language requires that all declarations have at least a brief description or detailed documentation.</p>
<p>Documentation begins with the <code>@</code> symbol followed by documentation until the end of the line. You can end the documentation with an attribute indicating what it refers to, for example:</p>
<div class="fragment"><div class="line">@ Color values [brief]</div>
<div class="line">@ Detailed description. [detail]</div>
<div class="line">struct Color</div>
<div class="line">    ...</div>
</div><!-- fragment --><p> The <code>[brief]</code> attribute is the default attribute when no attribute is specified.</p>
<p>You can also place documentation on the same line as the declaration. In this case, the default attribute for this documentation will be <code>[detail]</code>. The example below is equivalent to the previous one:</p>
<div class="fragment"><div class="line">@ Color values</div>
<div class="line">struct Color @ Detailed description. [detail]</div>
<div class="line">    ...</div>
</div><!-- fragment --><p>This isn't very elegant. This feature is mainly intended for cleaner documentation of fields and function arguments:</p>
<div class="fragment"><div class="line">@ Color values.</div>
<div class="line">@ Detailed description. [detail]</div>
<div class="line">struct Color</div>
<div class="line">    field Red @ Red channel clear value.</div>
<div class="line">    field Green @ Green channel clear value.</div>
<div class="line">    field Blue @ Blue channel clear value.</div>
<div class="line">    field Alpha @ Alpha channel clear value.</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Note that the language doesn't care about line breaks and indentation. The language understands everything from context. Naturally, except for documentation context.</dd></dl>
<p>To create a multiline comment, use three consecutive backtick symbols <code>`</code>:</p>
<div class="fragment"><div class="line">@ Color values.</div>
<div class="line">@ ```</div>
<div class="line">    Detailed description.</div>
<div class="line">    Other string.</div>
<div class="line">       Save three spaces.</div>
<div class="line">    There will be no spaces at the beginning of this line.``` [detail]</div>
<div class="line">struct Color</div>
<div class="line">    field Red @ Red channel clear value.</div>
<div class="line">    field Green @ Green channel clear value.</div>
<div class="line">    field Blue @ Blue channel clear value.</div>
<div class="line">    field Alpha @ Alpha channel clear value.</div>
</div><!-- fragment --><p>Note that the first line of multiline documentation sets the initial indentation. Therefore, the line <code>&#160;&#160;&#160;Save three spaces.</code> will preserve the 3 leading spaces.</p>
<p>There are also special characters like <code>{</code>, <code>}</code>, <code>[</code>, <code>]</code>. Their purpose isn't important right now, but keep in mind they need to be escaped. For example, if you need to output <code>{</code>, the correct way is <code>\{</code>.</p>
<dl class="section note"><dt>Note</dt><dd>The <code>\</code> character doesn't need to be escaped. The language understands from context what it is.</dd></dl>
<h2><a class="anchor" id="start"></a>
Specification Start</h2>
<p>The first declaration the compiler must encounter should always be <code>api Decl</code>.</p>
<p>Everything else, including imports, must come after it.</p>
<h2><a class="anchor" id="enumerations"></a>
Enumerations</h2>
<p>A constant declaration can look like this:</p>
<div class="fragment"><div class="line">@ Graphics features.</div>
<div class="line">enum Feature</div>
<div class="line">    const None @ No special features</div>
<div class="line">    const Bindless @ Bindless resource access</div>
<div class="line">    const GeometryShader @ Geometry shader support</div>
<div class="line">    const MeshShader @ Mesh shader support</div>
<div class="line">    const SamplerFilterMinmax @ Min/max sampler filtering</div>
<div class="line">    const DrawIndirect @ Indirect drawing</div>
</div><!-- fragment --><p>The constant type must always be <code>Int32</code>, even if explicitly specified:</p>
<div class="fragment"><div class="line">@ Graphics features.</div>
<div class="line">enum Feature</div>
<div class="line">    const None {Int32} @ No special features</div>
</div><!-- fragment --><p>By default, each constant's value increments by one from the previous constant's value. The first constant has a value of 0. However, we can explicitly specify constant values:</p>
<div class="fragment"><div class="line">@ Graphics features.</div>
<div class="line">enum Feature [flags]</div>
<div class="line">    const None @ No special features</div>
<div class="line">    const Bindless @ Bindless resource access</div>
<div class="line">    const GeometryShader : 2 @ Geometry shader support</div>
<div class="line">    const MeshShader : 4 @ Mesh shader support</div>
<div class="line">    const SamplerFilterMinmax : 8 @ Min/max sampler filtering</div>
<div class="line">    const DrawIndirect : 16 @ Indirect drawing</div>
<div class="line">    const Combine : MeshShader, DrawIndirect @ Combine flags sample</div>
</div><!-- fragment --><p>Here None will be 0, and Bindless will be 1. For example, in C this would look like after compilation:</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span></div>
<div class="line">{</div>
<div class="line">    SAMPLE_FEATURE_NONE_BIT                  = 0, </div>
<div class="line">    SAMPLE_FEATURE_BINDLESS_BIT              = 1, </div>
<div class="line">    SAMPLE_FEATURE_GEOMETRY_SHADER_BIT       = 2, </div>
<div class="line">    SAMPLE_FEATURE_MESH_SHADER_BIT           = 4, </div>
<div class="line">    SAMPLE_FEATURE_SAMPLER_FILTER_MINMAX_BIT = 8, </div>
<div class="line">    SAMPLE_FEATURE_DRAW_INDIRECT_BIT         = 16, </div>
<div class="line">    SAMPLE_FEATURE_COMBINE_BIT               = SAMPLE_FEATURE_MESH_SHADER_BIT | SAMPLE_FEATURE_DRAW_INDIRECT_BIT, </div>
<div class="line">    SAMPLE_FEATURE_MAX_ENUM                  = 0x7FFFFFFF </div>
<div class="line">} sample_feature_flags_t;</div>
<div class="line">SAMPLE_FLAGS(sample_feature_flags_t)</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd><code>SAMPLE_FEATURE_MAX_ENUM</code> ensures the constant is always 4 bytes across all platforms and compilers. <code>SAMPLE_FLAGS</code> enables bitwise operations in C++.</dd></dl>
<h2><a class="anchor" id="builtin-types"></a>
Built-in Types</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadRight">Type   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight"><code>Void</code>   </td><td class="markdownTableBodyLeft">Absence of type. For example, if a function has no return type, it's <code>Void</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight"><code>Char</code>   </td><td class="markdownTableBodyLeft">Character    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight"><code>Bool</code>   </td><td class="markdownTableBodyLeft">Boolean value    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight"><code>Int8</code>   </td><td class="markdownTableBodyLeft">8-bit signed integer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight"><code>Uint8</code>   </td><td class="markdownTableBodyLeft">8-bit unsigned integer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight"><code>Int16</code>   </td><td class="markdownTableBodyLeft">16-bit signed integer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight"><code>Uint16</code>   </td><td class="markdownTableBodyLeft">16-bit unsigned integer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight"><code>Int32</code>   </td><td class="markdownTableBodyLeft">32-bit signed integer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight"><code>Uint32</code>   </td><td class="markdownTableBodyLeft">32-bit unsigned integer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight"><code>Int64</code>   </td><td class="markdownTableBodyLeft">64-bit signed integer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight"><code>Uint64</code>   </td><td class="markdownTableBodyLeft">64-bit unsigned integer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight"><code>Float32</code>   </td><td class="markdownTableBodyLeft">Floating-point number (32-bit)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight"><code>Float64</code>   </td><td class="markdownTableBodyLeft">Floating-point number (64-bit)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight"><code>Str</code>   </td><td class="markdownTableBodyLeft">String represented as UTF-8 encoding    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight"><code>Data</code>   </td><td class="markdownTableBodyLeft">Pointer to data or buffer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight"><code>ConstData</code>   </td><td class="markdownTableBodyLeft">Pointer to immutable data or buffer   </td></tr>
</table>
<p>Generally these types look similar across languages, but there are exceptions. For example, in JS <code>Char</code> is represented as a string since JavaScript doesn't have single-character types. However, if you declare an array of <code>Char</code> in IDL, in C it will be a character array, while in JS it will simply be a string.</p>
<p>Similarly, in C <code>Data</code> and <code>ConstData</code> are represented as pointers, while in JS they might be sized <code>Uint8Array</code> or <code>ArrayBuffer</code>. IDL provides a unified way to properly format buffers in syntax that feels native to each language (pointers in C, buffers/strings/arrays in JS). More on this later in the TODO section.</p>
<h2><a class="anchor" id="structures"></a>
Structures</h2>
<p>Structure declarations are no different from other declarations:</p>
<div class="fragment"><div class="line">@ Color values.</div>
<div class="line">@ Detailed description. [detail]</div>
<div class="line">struct Color</div>
<div class="line">    field Red @ Red channel clear value.</div>
<div class="line">    field Green @ Green channel clear value.</div>
<div class="line">    field Blue @ Blue channel clear value.</div>
<div class="line">    field Alpha @ Alpha channel clear value.</div>
</div><!-- fragment --><p>The default field type is <code>Int32</code>. To specify a type, use a type reference in braces <code>{DeclRef}</code>:</p>
<div class="fragment"><div class="line">@ Color values.</div>
<div class="line">struct Color</div>
<div class="line">    field Red {Float32} @ Red channel clear value.</div>
<div class="line">    field Green {Float32} @ Green channel clear value.</div>
<div class="line">    field Blue {Float32} @ Blue channel clear value.</div>
<div class="line">    field Alpha {Float32} @ Alpha channel clear value.</div>
</div><!-- fragment --><p>You can also set default values for fields. These will be assigned during initialization in languages that support it (e.g., C++):</p>
<div class="fragment"><div class="line">@ Color values.</div>
<div class="line">struct Color</div>
<div class="line">    field Red {Float32} @ Red channel clear value.</div>
<div class="line">    field Green {Float32} @ Green channel clear value.</div>
<div class="line">    field Blue {Float32} @ Blue channel clear value.</div>
<div class="line">    field Alpha {Float32} : 1 @ Alpha channel clear value.</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Currently only integers and constants can be specified as defaults.</dd></dl>
<div class="fragment"><div class="line">@ Brief.</div>
<div class="line">struct Test</div>
<div class="line">    field Flags {Feature} : Feature.Bindless, Feature.MeshShader @ Sample.</div>
</div><!-- fragment --><p>Note the use of the fully qualified name Feature.Bindless to indicate that Bindless belongs to the Feature declaration, not Test.</p>
<h2><a class="anchor" id="functions"></a>
Functions</h2>
<h2><a class="anchor" id="interfaces"></a>
Interfaces</h2>
<h2><a class="anchor" id="methods"></a>
Methods</h2>
<h2><a class="anchor" id="callbacks"></a>
Callbacks</h2>
<h2><a class="anchor" id="properties"></a>
Properties</h2>
<h2><a class="anchor" id="events"></a>
Events</h2>
<h2><a class="anchor" id="import"></a>
Import</h2>
<h2><a class="anchor" id="attributes"></a>
Attributes</h2>
<h2><a class="anchor" id="error-handling"></a>
Error Handling</h2>
<p>The language provides special facilities for cross-language error handling. This is necessary because C lacks exceptions and typically uses error codes, while JS has exceptions. Therefore, IDL offers a built-in way to describe errors that works natively across all target languages.</p>
<h1><a class="anchor" id="using-idlc"></a>
Using the idlc Command Line Tool</h1>
<div class="section_buttons"></div><div class="section_buttons"><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Previous   </th><th class="markdownTableHeadRight">Next    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a href="quick-start.html">Quick Start</a>   </td><td class="markdownTableBodyRight"><a href="topics.html">Documentation</a>   </td></tr>
</table>
</div><div class="section_buttons"></div> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.12.0-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
