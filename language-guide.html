<!-- HTML header for doxygen 1.12.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta name="description" content="Interface Definition Language Compiler">
<meta name="google-site-verification" content="uQYFmsuPjcXUmeBoLNMqxmIJ4S__SUukKLX_xzT9sH4" />
<meta name="msvalidate.01" content="E78F7336FAA956728F9E29CB3CFC7741" />
<title>idlc: Language Guide</title>
<link rel="icon" href="icon.svg" type="image/svg+xml" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript" src="idlc-doc.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/c.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/cmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/cpp.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/json.min.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
    DoxygenHighlight.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
<link href="idlc-doc.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign">
   <div id="projectname">idlc<span id="projectnumber">&#160;1.5.12</span>
   </div>
   <div id="projectbrief">Interface Definition Language Compiler</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('language-guide.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Language Guide</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul>
  <li class="level1">
    <a href="#idl">Interface Definition Language</a>
    <ul>
      <li class="level2">
        <a href="#declarations">Declarations</a>
      </li>
      <li class="level2">
        <a href="#documentation">Documentation</a>
      </li>
      <li class="level2">
        <a href="#start">Specification Start</a>
      </li>
      <li class="level2">
        <a href="#enumerations">Enumerations</a>
      </li>
      <li class="level2">
        <a href="#builtin-types">Built-in Types</a>
      </li>
      <li class="level2">
        <a href="#structures">Structures</a>
      </li>
      <li class="level2">
        <a href="#functions">Functions</a>
      </li>
      <li class="level2">
        <a href="#interfaces">Interfaces</a>
      </li>
      <li class="level2">
        <a href="#properties">Properties</a>
      </li>
      <li class="level2">
        <a href="#callbacks">Callbacks</a>
      </li>
      <li class="level2">
        <a href="#events">Events</a>
      </li>
      <li class="level2">
        <a href="#import">Import</a>
      </li>
      <li class="level2">
        <a href="#decl-refs">Declaration References</a>
      </li>
      <li class="level2">
        <a href="#autotoc_md0">Comments</a>
      </li>
      <li class="level2">
        <a href="#attributes">Attributes</a>
        <ul>
          <li class="level3">
            <a href="#attr-flags">[flags]</a>
          </li>
          <li class="level3">
            <a href="#attr-hex">[hex]</a>
          </li>
          <li class="level3">
            <a href="#attr-platform">[platform]</a>
          </li>
          <li class="level3">
            <a href="#attr-value">[value]</a>
          </li>
          <li class="level3">
            <a href="#attr-type">[type]</a>
          </li>
          <li class="level3">
            <a href="#attr-static">[static]</a>
          </li>
          <li class="level3">
            <a href="#attr-ctor">[ctor]</a>
          </li>
          <li class="level3">
            <a href="#attr-this">[this]</a>
          </li>
          <li class="level3">
            <a href="#attr-get">[get]</a>
          </li>
          <li class="level3">
            <a href="#attr-set">[set]</a>
          </li>
          <li class="level3">
            <a href="#attr-handle">[handle]</a>
          </li>
          <li class="level3">
            <a href="#attr-cname">[cname]</a>
          </li>
          <li class="level3">
            <a href="#attr-array">[array]</a>
          </li>
          <li class="level3">
            <a href="#attr-datasize">[datasize]</a>
          </li>
          <li class="level3">
            <a href="#attr-const">[const]</a>
          </li>
          <li class="level3">
            <a href="#attr-ref">[ref]</a>
          </li>
          <li class="level3">
            <a href="#attr-refinc">[refinc]</a>
          </li>
          <li class="level3">
            <a href="#attr-userdata">[userdata]</a>
          </li>
          <li class="level3">
            <a href="#attr-errorcode">[errorcode]</a>
          </li>
          <li class="level3">
            <a href="#attr-noerror">[noerror]</a>
          </li>
          <li class="level3">
            <a href="#attr-result">[result]</a>
          </li>
          <li class="level3">
            <a href="#attr-destroy">[destroy]</a>
          </li>
          <li class="level3">
            <a href="#attr-in">[in]</a>
          </li>
          <li class="level3">
            <a href="#attr-out">[out]</a>
          </li>
          <li class="level3">
            <a href="#attr-optional">[optional]</a>
          </li>
          <li class="level3">
            <a href="#attr-tokenizer">[tokenizer]</a>
          </li>
          <li class="level3">
            <a href="#attr-version">[version]</a>
          </li>
          <li class="level3">
            <a href="#attr-brief">[brief]</a>
          </li>
          <li class="level3">
            <a href="#attr-detail">[detail]</a>
          </li>
          <li class="level3">
            <a href="#attr-author">[author]</a>
          </li>
          <li class="level3">
            <a href="#attr-see">[see]</a>
          </li>
          <li class="level3">
            <a href="#attr-note">[note]</a>
          </li>
          <li class="level3">
            <a href="#attr-warning">[warning]</a>
          </li>
          <li class="level3">
            <a href="#attr-copyright">[copyright]</a>
          </li>
          <li class="level3">
            <a href="#attr-license">[license]</a>
          </li>
          <li class="level3">
            <a href="#attr-return">[return]</a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#error-handling">Error Handling</a>
      </li>
      <li class="level2">
        <a href="#learn-how-to-install">Next Steps</a>
      </li>
    </ul>
  </li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="idl"></a>
Interface Definition Language</h1>
<p>This guide describes the use of IDL for creating library specifications, its syntax, and capabilities.</p>
<h2><a class="anchor" id="declarations"></a>
Declarations</h2>
<p>All declarations, whether they're structure declarations or functions and their arguments, must begin with the appropriate keyword followed by the declaration name. Example:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ API Sample</div>
<div class="line">api Sample</div>
<div class="line"> </div>
<div class="line">@ Color values.</div>
<div class="line">struct Color</div>
<div class="line">    field Red @ Red channel clear value.</div>
<div class="line">    field Green @ Green channel clear value.</div>
<div class="line">    field Blue @ Blue channel clear value.</div>
<div class="line">    field Alpha @ Alpha channel clear value.</div>
<div class="line"> </div>
<div class="line">@ Object type</div>
<div class="line">interface Logger</div>
<div class="line">    method TestName [static] @ Detail</div>
</div><!-- fragment --><p>In this example, <code>api</code>, <code>struct</code>, <code>interface</code>, and <code>method</code> are keywords that create declarations. They're followed by the declaration name.</p>
<p>The language requires all names to begin with a capital letter. The main question is how the compiler will represent these names for target languages during compilation? The answer is that naming conventions depend on the target language - for example, C uses snake_case, JS uses camelCase, and C# uses PascalCase.</p>
<p>Let's say we have a method name TestName. The compiler tokenizes it into two words <code>Test</code> and <code>Name</code> based on capital letters and letter-digit-letter transitions. So in C, the name would be:</p>
<div class="fragment"><div class="line">@c</div>
<div class="line">sample_logger_test_name</div>
</div><!-- fragment --><p>and in JS:</p>
<div class="fragment"><div class="line">@javascript</div>
<div class="line">testName</div>
</div><!-- fragment --><p>Note that C isn't an OOP language, but many C libraries (like cairo, etc.) manually "implement OOP": they add opaque types that are passed as the first parameter in functions (acting as <code>this</code>). The function prefix indicates the "class" name. These opaque types can be implemented in C or even C++, as in this library.</p>
<p>In JS, the interface translates to a JS class with methods and other features.</p>
<dl class="section note"><dt>Note</dt><dd>If default tokenization doesn't work for your case, you can use the <code>[tokenizer]</code> attribute as shown in this <a class="el" href="#attr-tokenizer">[tokenizer]</a> section.</dd></dl>
<h2><a class="anchor" id="documentation"></a>
Documentation</h2>
<p>The language requires that all declarations have at least a brief description or detailed documentation.</p>
<p>Documentation begins with the <code>@</code> symbol followed by documentation until the end of the line. You can end the documentation with an attribute indicating what it refers to, for example:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Color values [brief]</div>
<div class="line">@ Detailed description. [detail]</div>
<div class="line">struct Color</div>
<div class="line">    ...</div>
</div><!-- fragment --><p> The <code>[brief]</code> attribute is the default attribute when no attribute is specified.</p>
<p>You can also place documentation on the same line as the declaration. In this case, the default attribute for this documentation will be <code>[detail]</code>. The example below is equivalent to the previous one:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Color values</div>
<div class="line">struct Color @ Detailed description.</div>
<div class="line">    ...</div>
</div><!-- fragment --><p>This isn't very elegant. This feature is mainly intended for cleaner documentation of fields and function arguments:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Color values.</div>
<div class="line">@ Detailed description. [detail]</div>
<div class="line">struct Color</div>
<div class="line">    field Red @ Red channel clear value.</div>
<div class="line">    field Green @ Green channel clear value.</div>
<div class="line">    field Blue @ Blue channel clear value.</div>
<div class="line">    field Alpha @ Alpha channel clear value.</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Note that the language doesn't care about line breaks and indentation. The language understands everything from context. Naturally, except for documentation context.</dd></dl>
<p>To create a multiline comment, use three consecutive backtick symbols <code>`</code>:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Color values.</div>
<div class="line">@ ```</div>
<div class="line">    Detailed description.</div>
<div class="line">    Other string.</div>
<div class="line">       Save three spaces.</div>
<div class="line">    There will be no spaces at the beginning of this line.``` [detail]</div>
<div class="line">struct Color</div>
<div class="line">    field Red @ Red channel clear value.</div>
<div class="line">    field Green @ Green channel clear value.</div>
<div class="line">    field Blue @ Blue channel clear value.</div>
<div class="line">    field Alpha @ Alpha channel clear value.</div>
</div><!-- fragment --><p>Note that the first line of multiline documentation sets the initial indentation. Therefore, the line <code>&#160;&#160;&#160;Save three spaces.</code> will preserve the 3 leading spaces.</p>
<p>There are also special characters like <code>{</code>, <code>}</code>, <code>[</code>, <code>]</code>. Their purpose isn't important right now, but keep in mind they need to be escaped. For example, if you need to output <code>{</code>, the correct way is <code>\{</code>.</p>
<dl class="section note"><dt>Note</dt><dd>The <code>\</code> character doesn't need to be escaped. The language understands from context what it is.</dd></dl>
<h2><a class="anchor" id="start"></a>
Specification Start</h2>
<p>The first declaration the compiler must encounter should always be <code>api Decl</code>.</p>
<p>Everything else, including imports, must come after it.</p>
<h2><a class="anchor" id="enumerations"></a>
Enumerations</h2>
<p>A constant declaration can look like this:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Graphics features.</div>
<div class="line">enum Feature</div>
<div class="line">    const None @ No special features</div>
<div class="line">    const Bindless @ Bindless resource access</div>
<div class="line">    const GeometryShader @ Geometry shader support</div>
<div class="line">    const MeshShader @ Mesh shader support</div>
<div class="line">    const SamplerFilterMinmax @ Min/max sampler filtering</div>
<div class="line">    const DrawIndirect @ Indirect drawing</div>
</div><!-- fragment --><p>The constant type must always be <code>Int32</code>, even if explicitly specified:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Graphics features.</div>
<div class="line">enum Feature</div>
<div class="line">    const None {Int32} @ No special features</div>
</div><!-- fragment --><p>By default, each constant's value increments by one from the previous constant's value. The first constant has a value of 0. However, we can explicitly specify constant values:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Graphics features.</div>
<div class="line">enum Feature [flags]</div>
<div class="line">    const None @ No special features</div>
<div class="line">    const Bindless @ Bindless resource access</div>
<div class="line">    const GeometryShader : 2 @ Geometry shader support</div>
<div class="line">    const MeshShader : 4 @ Mesh shader support</div>
<div class="line">    const SamplerFilterMinmax : 8 @ Min/max sampler filtering</div>
<div class="line">    const DrawIndirect : 16 @ Indirect drawing</div>
<div class="line">    const Combine : MeshShader, DrawIndirect @ Combine flags sample</div>
</div><!-- fragment --><p>Here None will be 0, and Bindless will be 1. For example, in C this would look like after compilation:</p>
<div class="fragment"><div class="line">@c</div>
<div class="line">/**</div>
<div class="line"> * @brief Graphics features.</div>
<div class="line"> */</div>
<div class="line">typedef enum</div>
<div class="line">{</div>
<div class="line">    SAMPLE_FEATURE_NONE_BIT                  = 0, /**&lt; No special features */</div>
<div class="line">    SAMPLE_FEATURE_BINDLESS_BIT              = 1, /**&lt; Bindless resource access */</div>
<div class="line">    SAMPLE_FEATURE_GEOMETRY_SHADER_BIT       = 2, /**&lt; Geometry shader support */</div>
<div class="line">    SAMPLE_FEATURE_MESH_SHADER_BIT           = 4, /**&lt; Mesh shader support */</div>
<div class="line">    SAMPLE_FEATURE_SAMPLER_FILTER_MINMAX_BIT = 8, /**&lt; Min/max sampler filtering */</div>
<div class="line">    SAMPLE_FEATURE_DRAW_INDIRECT_BIT         = 16, /**&lt; Indirect drawing */</div>
<div class="line">    SAMPLE_FEATURE_COMBINE_BIT               = SAMPLE_FEATURE_MESH_SHADER_BIT | SAMPLE_FEATURE_DRAW_INDIRECT_BIT, /**&lt; Combine flags sample */</div>
<div class="line">    SAMPLE_FEATURE_MAX_ENUM                  = 0x7FFFFFFF /**&lt; Max value of enum (not used) */</div>
<div class="line">} sample_feature_flags_t;</div>
<div class="line">SAMPLE_FLAGS(sample_feature_flags_t)</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd><code>SAMPLE_FEATURE_MAX_ENUM</code> ensures the constant is always 4 bytes across all platforms and compilers. <code>SAMPLE_FLAGS</code> enables bitwise operations in C++.</dd></dl>
<h2><a class="anchor" id="builtin-types"></a>
Built-in Types</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadRight">Type   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight"><code>Void</code>   </td><td class="markdownTableBodyLeft">Absence of type. For example, if a function has no return type, it's <code>Void</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight"><code>Char</code>   </td><td class="markdownTableBodyLeft">Character    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight"><code>Bool</code>   </td><td class="markdownTableBodyLeft">Boolean value    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight"><code>Int8</code>   </td><td class="markdownTableBodyLeft">8-bit signed integer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight"><code>Uint8</code>   </td><td class="markdownTableBodyLeft">8-bit unsigned integer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight"><code>Int16</code>   </td><td class="markdownTableBodyLeft">16-bit signed integer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight"><code>Uint16</code>   </td><td class="markdownTableBodyLeft">16-bit unsigned integer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight"><code>Int32</code>   </td><td class="markdownTableBodyLeft">32-bit signed integer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight"><code>Uint32</code>   </td><td class="markdownTableBodyLeft">32-bit unsigned integer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight"><code>Int64</code>   </td><td class="markdownTableBodyLeft">64-bit signed integer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight"><code>Uint64</code>   </td><td class="markdownTableBodyLeft">64-bit unsigned integer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight"><code>Float32</code>   </td><td class="markdownTableBodyLeft">Floating-point number (32-bit)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight"><code>Float64</code>   </td><td class="markdownTableBodyLeft">Floating-point number (64-bit)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight"><code>Str</code>   </td><td class="markdownTableBodyLeft">String represented as UTF-8 encoding    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight"><code>Data</code>   </td><td class="markdownTableBodyLeft">Pointer to data or buffer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight"><code>ConstData</code>   </td><td class="markdownTableBodyLeft">Pointer to immutable data or buffer   </td></tr>
</table>
<p>Generally these types look similar across languages, but there are exceptions. For example, in JS <code>Char</code> is represented as a string since JavaScript doesn't have single-character types. However, if you declare an array of <code>Char</code> in IDL, in C it will be a character array, while in JS it will simply be a string.</p>
<p>Similarly, in C <code>Data</code> and <code>ConstData</code> are represented as pointers, while in JS they might be sized <code>Uint8Array</code> or <code>ArrayBuffer</code>. IDL provides a unified way to properly format buffers in syntax that feels native to each language (pointers in C, buffers/strings/arrays in JS). More on this later in the <a class="el" href="#attr-datasize">[datasize]</a> section.</p>
<p>The following special types are available for documentation purposes only:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadRight">Type   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight"><code>Year</code>   </td><td class="markdownTableBodyLeft">Gets current year    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight"><code>Major</code>   </td><td class="markdownTableBodyLeft">Gets major component of api version    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight"><code>Minor</code>   </td><td class="markdownTableBodyLeft">Gets minor component of api version    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight"><code>Micro</code>   </td><td class="markdownTableBodyLeft">Gets micro component of api version   </td></tr>
</table>
<h2><a class="anchor" id="structures"></a>
Structures</h2>
<p>Structure declarations are no different from other declarations:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Color values.</div>
<div class="line">@ Detailed description. [detail]</div>
<div class="line">struct Color</div>
<div class="line">    field Red @ Red channel clear value.</div>
<div class="line">    field Green @ Green channel clear value.</div>
<div class="line">    field Blue @ Blue channel clear value.</div>
<div class="line">    field Alpha @ Alpha channel clear value.</div>
</div><!-- fragment --><p>The default field type is <code>Int32</code>. To specify a type, use a type reference in braces <code>{DeclRef}</code>:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Color values.</div>
<div class="line">struct Color</div>
<div class="line">    field Red {Float32} @ Red channel clear value.</div>
<div class="line">    field Green {Float32} @ Green channel clear value.</div>
<div class="line">    field Blue {Float32} @ Blue channel clear value.</div>
<div class="line">    field Alpha {Float32} @ Alpha channel clear value.</div>
</div><!-- fragment --><p>You can also set default values for fields. These will be assigned during initialization in languages that support it (e.g., C++):</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Color values.</div>
<div class="line">struct Color</div>
<div class="line">    field Red {Float32} @ Red channel clear value.</div>
<div class="line">    field Green {Float32} @ Green channel clear value.</div>
<div class="line">    field Blue {Float32} @ Blue channel clear value.</div>
<div class="line">    field Alpha {Float32} : 1 @ Alpha channel clear value.</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Currently only integers and constants can be specified as defaults.</dd></dl>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Brief.</div>
<div class="line">struct Test</div>
<div class="line">    field Flags {Feature} : Feature.Bindless, Feature.MeshShader @ Sample.</div>
</div><!-- fragment --><p>Note the use of the fully qualified name Feature.Bindless to indicate that Bindless belongs to the Feature declaration, not Test.</p>
<h2><a class="anchor" id="functions"></a>
Functions</h2>
<p>The simplest function can be declared as:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Sample</div>
<div class="line">func Func</div>
</div><!-- fragment --><p>Let's add some arguments:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Sample</div>
<div class="line">func Func</div>
<div class="line">    arg Value @ First arg</div>
<div class="line">    arg OtherValue @ Second arg</div>
</div><!-- fragment --><p>By default, argument types are <code>Int32</code>. Let's specify return type and argument types:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Sample</div>
<div class="line">func Func {Float32}</div>
<div class="line">    arg Value {Uint32} @ First arg</div>
<div class="line">    arg OtherValue {Float32} @ Second arg</div>
</div><!-- fragment --><p>Arguments can also have default values similar to structure fields.</p>
<p>Arguments can have direction specified. This is useful in special cases to make function usage more native for target languages. More on this in <a class="el" href="#attr-result">[result]</a> section.</p>
<h2><a class="anchor" id="interfaces"></a>
Interfaces</h2>
<p>In OOP languages, interfaces become classes, while in C they become opaque types.</p>
<p>Let's add an interface with two creation methods:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Brief.</div>
<div class="line">interface ObjType</div>
<div class="line">    @ Creates new object instance</div>
<div class="line">    method CreateByValue {ObjType} [ctor]</div>
<div class="line">        arg Name {Str} @ Name of object.</div>
<div class="line"> </div>
<div class="line">    @ Creates new object instance</div>
<div class="line">    method Create {ObjType} [ctor]</div>
</div><!-- fragment --><p>Note both methods have <code>[ctor]</code> attributes, telling the compiler to make these methods constructors in OOP-capable languages. In JS, instantiation would look like <code>const inst1 = new sample.ObjType('test');</code>. Constructor methods are implicitly static. Constructors must return the type either as return value or argument (here it's returned).</p>
<p>Let's add three more methods:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Brief.</div>
<div class="line">interface ObjType</div>
<div class="line">    @ Creates new object instance</div>
<div class="line">    method CreateByValue {ObjType} [ctor]</div>
<div class="line">        arg Name {Str} @ Name of object.</div>
<div class="line"> </div>
<div class="line">    @ Creates new object instance</div>
<div class="line">    method Create {ObjType} [ctor]</div>
<div class="line"> </div>
<div class="line">    @ Destroy instance.</div>
<div class="line">    method Destroy [destroy]</div>
<div class="line">        arg Obj {ObjType} [this] @ object to destroy.</div>
<div class="line"> </div>
<div class="line">    @ Method of interface.</div>
<div class="line">    method Method</div>
<div class="line">        arg Obj {ObjType} [this] @ this object</div>
<div class="line">        arg Val @ Value arg</div>
<div class="line"> </div>
<div class="line">    @ Method of interface.</div>
<div class="line">    method ClassMethod [static]</div>
<div class="line">        arg Val @ Value arg</div>
</div><!-- fragment --><p>The <code>Destroy</code> method will be used for object deallocation. The <code>[destroy]</code> attribute tells RAII or garbage-collected languages which method releases unmanaged handles.</p>
<p><code>Method</code> is an instance method. It explicitly takes Obj argument with <code>[this]</code> attribute. In OOP languages this becomes implicit <code>this</code>/<code>self</code>. In non-OOP languages it remains as Obj argument. For example in C:</p>
<div class="fragment"><div class="line">@c</div>
<div class="line">/**</div>
<div class="line"> * @brief     Method of interface.</div>
<div class="line"> * @param[in] obj this object</div>
<div class="line"> * @param[in] val Value arg</div>
<div class="line"> */</div>
<div class="line">sample_api void</div>
<div class="line">sample_obj_type_method(sample_obj_type_t obj,</div>
<div class="line">                       sample_sint32_t val);</div>
</div><!-- fragment --><p><code>ClassMethod</code> is static and cannot have <code>[this]</code> argument.</p>
<p>Let's add two more methods:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Brief.</div>
<div class="line">interface ObjType</div>
<div class="line">    // ...</div>
<div class="line"> </div>
<div class="line">    @ Get method</div>
<div class="line">    method GetValue {Float32} [const]</div>
<div class="line">        arg Obj {ObjType} [this] @ this object</div>
<div class="line"> </div>
<div class="line">    @ Set method</div>
<div class="line">    method SetValue</div>
<div class="line">        arg Obj {ObjType} [this] @ this object</div>
<div class="line">        arg Value {Float32} @ New value</div>
</div><!-- fragment --><p>Note <code>GetValue</code> is marked <code>[const]</code> to indicate it doesn't modify the instance.</p>
<h2><a class="anchor" id="properties"></a>
Properties</h2>
<p>Let's add a property to the interface from <a class="el" href="#interfaces">Interfaces</a> section:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Brief.</div>
<div class="line">interface ObjType</div>
<div class="line">    // ...</div>
<div class="line"> </div>
<div class="line">    @ Get method</div>
<div class="line">    method GetValue {Float32} [const]</div>
<div class="line">        arg Obj {ObjType} [this] @ this object</div>
<div class="line"> </div>
<div class="line">    @ Set method</div>
<div class="line">    method SetValue</div>
<div class="line">        arg Obj {ObjType} [this] @ this object</div>
<div class="line">        arg Value {Float32} @ New value</div>
<div class="line"> </div>
<div class="line">    prop Value [get(GetValue),set(SetValue)] @ Value property</div>
</div><!-- fragment --><p>In languages supporting properties (JS, C# etc.), this creates a <code>Value</code> property instead of separate <code>GetValue</code>/<code>SetValue</code> methods. Class properties can also be created by adding <code>[static]</code> to methods.</p>
<h2><a class="anchor" id="callbacks"></a>
Callbacks</h2>
<p>Callbacks are declared similarly to functions:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Callback to which the compilation result is passed.</div>
<div class="line">@ ```</div>
<div class="line">    If you need to save the compilation result to a location other than the file</div>
<div class="line">    system, such as the network or console output, you can use this callback.``` [detail]</div>
<div class="line">@ The compiler can output multiple sources. The exact number depends on the selected generator {Generator}. [note]</div>
<div class="line">callback WriteCallback</div>
<div class="line">    arg Source {Source} [const,ref] @ Source of compiler output.</div>
<div class="line">    arg Data {Data} [userdata] @ User data specified when setting up a callback.</div>
</div><!-- fragment --><p>This example comes from the compiler's own specification.</p>
<p>We can now use this callback in functions, static methods, and instance methods. It can also be used as a field type in structures.</p>
<p>Let's examine the specification further:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Compilation options.</div>
<div class="line">@ This object specifies various compilation options. [detail]</div>
<div class="line">interface Options</div>
<div class="line">    @ Get the current write callback.</div>
<div class="line">    @ Returns a callback if one has been configured. [detail]</div>
<div class="line">    @ Returns a callback. [return]</div>
<div class="line">    @ {SetWriter} [see]</div>
<div class="line">    method GetWriter {WriteCallback} [const]</div>
<div class="line">        arg Options {Options} [this] @ Target options.</div>
<div class="line">        arg Data {Data} [out,optional,userdata] @ Returning a callback user data pointer (may be null).</div>
<div class="line"> </div>
<div class="line">    @ Set write callback.</div>
<div class="line">    @ ```</div>
<div class="line">        Configures a callback to receive compiler output. If the callback is set, no output</div>
<div class="line">        will be made to the file system ({SetOutputDir} will also not be used).``` [detail]</div>
<div class="line">    @ Typical uses of a writer are writing to memory or outputting to the console and the like. [note]</div>
<div class="line">    @ {GetWriter} [see]</div>
<div class="line">    method SetWriter</div>
<div class="line">        arg Options {Options} [this] @ Target options.</div>
<div class="line">        arg Callback {WriteCallback} @ Callback function.</div>
<div class="line">        arg Data {Data} [optional,userdata] @ Callback user data.</div>
</div><!-- fragment --><p>As we can see, the Options interface can set a callback and store user data (useful for unmanaged languages like C to pass context to callbacks or even propagate C++ exceptions through C functions using <code>std::current_exception</code>).</p>
<p>In C, these functions look like this:</p>
<div class="fragment"><div class="line">@c</div>
<div class="line">/**</div>
<div class="line"> * @brief     Callback to which the compilation result is passed.</div>
<div class="line"> * @details   If you need to save the compilation result to a location other than the file</div>
<div class="line"> *            system, such as the network or console output, you can use this callback.</div>
<div class="line"> * @param[in] source Source of compiler output.</div>
<div class="line"> * @param[in] data User data specified when setting up a callback.</div>
<div class="line"> * @note      The compiler can output multiple sources. The exact number depends on the selected generator ::idl_generator_t.</div>
<div class="line"> * @ingroup   types</div>
<div class="line"> */</div>
<div class="line">typedef void</div>
<div class="line">(*idl_write_callback_t)(const idl_source_t* source,</div>
<div class="line">                        idl_data_t data);</div>
<div class="line"> </div>
<div class="line">/**</div>
<div class="line"> * @brief      Get the current write callback.</div>
<div class="line"> * @details    Returns a callback if one has been configured.</div>
<div class="line"> * @param[in]  options Target options.</div>
<div class="line"> * @param[out] data Returning a callback user data pointer (may be null).</div>
<div class="line"> * @return     Returns a callback.</div>
<div class="line"> * @sa         ::idl_options_set_writer</div>
<div class="line"> * @ingroup    functions</div>
<div class="line"> */</div>
<div class="line">idl_api idl_write_callback_t</div>
<div class="line">idl_options_get_writer(idl_options_t options,</div>
<div class="line">                       idl_data_t* data);</div>
<div class="line"> </div>
<div class="line">/**</div>
<div class="line"> * @brief     Set write callback.</div>
<div class="line"> * @details   Configures a callback to receive compiler output. If the callback is set, no output</div>
<div class="line"> *            will be made to the file system (::idl_options_set_output_dir will also not be used).</div>
<div class="line"> * @param[in] options Target options.</div>
<div class="line"> * @param[in] callback Callback function.</div>
<div class="line"> * @param[in] data Callback user data.</div>
<div class="line"> * @note      Typical uses of a writer are writing to memory or outputting to the console and the like.</div>
<div class="line"> * @sa        ::idl_options_get_writer</div>
<div class="line"> * @ingroup   functions</div>
<div class="line"> */</div>
<div class="line">idl_api void</div>
<div class="line">idl_options_set_writer(idl_options_t options,</div>
<div class="line">                       idl_write_callback_t callback,</div>
<div class="line">                       idl_data_t data);</div>
</div><!-- fragment --><h2><a class="anchor" id="events"></a>
Events</h2>
<p>We can use callbacks as events. For example:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Compilation options.</div>
<div class="line">@ This object specifies various compilation options. [detail]</div>
<div class="line">interface Options</div>
<div class="line">    event Writer [get(GetWriter),set(SetWriter)] @ Event that occurs when the compiler outputs.</div>
</div><!-- fragment --><p>This example comes from the compiler's own specification.</p>
<p>This can be useful in certain languages. Let's look at JavaScript code for an online editor using this event with the callback:</p>
<div class="fragment"><div class="line">@javascript</div>
<div class="line">const options = new module.Options;</div>
<div class="line"> </div>
<div class="line">const results = {};</div>
<div class="line">options.writer = function (source) {</div>
<div class="line">    results[source.name] = source.data;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">const compiler = new module.Compiler;</div>
<div class="line">compiler.compile(generator, undefined, [source], options);</div>
</div><!-- fragment --><p>Here we assign a lambda to the writer property of the options instance, which takes compiled code and saves it to a captured dictionary variable as filename/code pairs.</p>
<h2><a class="anchor" id="import"></a>
Import</h2>
<p>Large specifications are rarely practical to describe in a single file. For this purpose, imports are available:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ IDLC</div>
<div class="line">api Idl [version(0,0,0)]</div>
<div class="line"> </div>
<div class="line">@ Warning/Error codes.</div>
<div class="line">@ Here are the warning and error codes that may occur during compilation. [detail]</div>
<div class="line">import Results</div>
<div class="line"> </div>
<div class="line">@ Compiler options.</div>
<div class="line">@ This is where the structures and various compilation options are located. [detail]</div>
<div class="line">import Options</div>
</div><!-- fragment --><p>Documentation for imports is also mandatory.</p>
<p>Repeated inclusion of an import has no effect - it's simply skipped.</p>
<dl class="section note"><dt>Note</dt><dd>Note that the C generator creates a separate file for each import.</dd></dl>
<h2><a class="anchor" id="decl-refs"></a>
Declaration References</h2>
<p>References to declarations use the <code>{DeclRef}</code> syntax. Forward references are allowed in documentation. Generated documentation will adapt reference names to match target language conventions.</p>
<p>Example Specification:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Compiler interface.</div>
<div class="line">@ Interface for interacting with the compiler. [detail]</div>
<div class="line">interface Compiler</div>
<div class="line">    @ Compile IDL.</div>
<div class="line">    @ Compilation result. [return]</div>
<div class="line">    @ ```</div>
<div class="line">        To read source code from memory instead of the file system, use {Sources} and/or configure </div>
<div class="line">        the importer with {Options.SetImporter} and pass the {File} argument as empty.``` [note]</div>
<div class="line">    @ ```</div>
<div class="line">        Priorities for resolving source code imports:</div>
<div class="line">        - {Options.SetImporter} - import callback if specified;</div>
<div class="line">        - {Sources} - then the source code array, if specified;</div>
<div class="line">        - {Options.SetImportDirs} - then in the paths to the import directories, if specified;</div>
<div class="line">        - then the current working directory.</div>
<div class="line">        ``` [note]</div>
<div class="line">    method Compile {Result}</div>
<div class="line">        arg Compiler {Compiler} [this] @ Target compiler.</div>
<div class="line">        arg Generator {Generator} @ Target of generator.</div>
<div class="line">        arg File {Str} [optional] @ Path to .idl file for compile.</div>
<div class="line">        arg SourceCount {Uint32} @ Number of sources.</div>
<div class="line">        arg Sources {Source} [const,array(SourceCount)] @ Sources.</div>
<div class="line">        arg Options {Options} [optional] @ Compile options, may be null.</div>
<div class="line">        arg Result {CompilationResult} [optional,result] @ Compilation result.</div>
</div><!-- fragment --><p>Result of resolving declaration reference for C:</p>
<div class="fragment"><div class="line">@c</div>
<div class="line">/**</div>
<div class="line"> * @brief      Compile IDL.</div>
<div class="line"> * @param[in]  compiler Target compiler.</div>
<div class="line"> * @param[in]  generator Target of generator.</div>
<div class="line"> * @param[in]  file Path to .idl file for compile.</div>
<div class="line"> * @param[in]  source_count Number of sources.</div>
<div class="line"> * @param[in]  sources Sources.</div>
<div class="line"> * @param[in]  options Compile options, may be null.</div>
<div class="line"> * @param[out] result Compilation result.</div>
<div class="line"> * @return     Compilation result.</div>
<div class="line"> * @parblock</div>
<div class="line"> * @note       To read source code from memory instead of the file system, use *sources* and/or configure</div>
<div class="line"> *             the importer with ::idl_options_set_importer and pass the *file* argument as empty.</div>
<div class="line"> * @endparblock</div>
<div class="line"> * @parblock</div>
<div class="line"> * @note       Priorities for resolving source code imports:</div>
<div class="line"> *             - ::idl_options_set_importer - import callback if specified;</div>
<div class="line"> *             - *sources* - then the source code array, if specified;</div>
<div class="line"> *             - ::idl_options_set_import_dirs - then in the paths to the import directories, if specified;</div>
<div class="line"> *             - then the current working directory.</div>
<div class="line"> *             </div>
<div class="line"> * @endparblock</div>
<div class="line"> * @ingroup    functions</div>
<div class="line"> */</div>
<div class="line">idl_api idl_result_t</div>
<div class="line">idl_compiler_compile(idl_compiler_t compiler,</div>
<div class="line">                     idl_generator_t generator,</div>
<div class="line">                     idl_utf8_t file,</div>
<div class="line">                     idl_uint32_t source_count,</div>
<div class="line">                     const idl_source_t* sources,</div>
<div class="line">                     idl_options_t options,</div>
<div class="line">                     idl_compilation_result_t* result);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md0"></a>
Comments</h2>
<p>Comments start with two <code>//</code>, everything that comes after them will be considered a comment until the end of the line and will not be taken into account when compiling.</p>
<dl class="section note"><dt>Note</dt><dd>In the documentation, two consecutive characters <code>//</code> are just two characters <code>//</code>.</dd></dl>
<h2><a class="anchor" id="attributes"></a>
Attributes</h2>
<p>As you may have noticed, the language provides only declarations - everything else is achieved by attaching attributes to these declarations. Even argument and field types are actually attributes:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Color values.</div>
<div class="line">struct Color</div>
<div class="line">    field Red {Float32} @ Red channel clear value.</div>
<div class="line">    field Green {Float32} @ Green channel clear value.</div>
<div class="line">    field Blue {Float32} @ Blue channel clear value.</div>
<div class="line">    field Alpha {Float32} @ Alpha channel clear value.</div>
</div><!-- fragment --><p>This is syntactic sugar for the <code>[type]</code> attribute:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Color values.</div>
<div class="line">struct Color</div>
<div class="line">    field Red [type(Float32)] @ Red channel clear value.</div>
<div class="line">    field Green [type(Float32)] @ Green channel clear value.</div>
<div class="line">    field Blue [type(Float32)] @ Blue channel clear value.</div>
<div class="line">    field Alpha [type(Float32)] @ Alpha channel clear value.</div>
</div><!-- fragment --><p>The same applies to default values:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Graphics features.</div>
<div class="line">enum Feature [flags]</div>
<div class="line">    const None @ No special features</div>
<div class="line">    const Bindless @ Bindless resource access</div>
<div class="line">    const GeometryShader : 2 @ Geometry shader support</div>
<div class="line">    const MeshShader : 4 @ Mesh shader support</div>
<div class="line">    const SamplerFilterMinmax : 8 @ Min/max sampler filtering</div>
<div class="line">    const DrawIndirect : 16 @ Indirect drawing</div>
<div class="line">    const Combine : MeshShader, DrawIndirect @ Combine flags sample</div>
</div><!-- fragment --><p>Is actually:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Graphics features.</div>
<div class="line">enum Feature [flags]</div>
<div class="line">    const None [type(Int32),value(0)] @ No special features</div>
<div class="line">    const Bindless [type(Int32),value(1)] @ Bindless resource access</div>
<div class="line">    const GeometryShader [type(Int32),value(2)] @ Geometry shader support</div>
<div class="line">    const MeshShader [type(Int32),value(4)] @ Mesh shader support</div>
<div class="line">    const SamplerFilterMinmax [type(Int32),value(8)] @ Min/max sampler filtering</div>
<div class="line">    const DrawIndirect [type(Int32),value(16)] @ Indirect drawing</div>
<div class="line">    const Combine [type(Int32),value(MeshShader,DrawIndirect)] @ Combine flags sample</div>
</div><!-- fragment --><p>In short, everything except declarations and documentation context is implemented through attributes.</p>
<h3><a class="anchor" id="attr-flags"></a>
[flags]</h3>
<p>Marks an enum as a bitmask type where values can be combined using bitwise operations. Automatically adds bitwise operation support in target languages:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Graphics features.</div>
<div class="line">enum Feature [flags]</div>
<div class="line">    const None @ No special features</div>
<div class="line">    const Bindless @ Bindless resource access</div>
<div class="line">    const GeometryShader : 2 @ Geometry shader support</div>
<div class="line">    const MeshShader : 4 @ Mesh shader support</div>
<div class="line">    const SamplerFilterMinmax : 8 @ Min/max sampler filtering</div>
<div class="line">    const DrawIndirect : 16 @ Indirect drawing</div>
</div><!-- fragment --><h3><a class="anchor" id="attr-hex"></a>
[hex]</h3>
<p>Specifies that enum values should be displayed in hexadecimal format in documentation and outputs:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Graphics features.</div>
<div class="line">enum Feature [flags,hex]</div>
<div class="line">    const None @ No special features</div>
<div class="line">    const Bindless @ Bindless resource access</div>
<div class="line">    const GeometryShader : 2 @ Geometry shader support</div>
<div class="line">    const MeshShader : 4 @ Mesh shader support</div>
<div class="line">    const SamplerFilterMinmax : 8 @ Min/max sampler filtering</div>
<div class="line">    const DrawIndirect : 16 @ Indirect drawing</div>
</div><!-- fragment --><p>C output:</p>
<div class="fragment"><div class="line">@c</div>
<div class="line">/**</div>
<div class="line"> * @brief Graphics features.</div>
<div class="line"> */</div>
<div class="line">typedef enum</div>
<div class="line">{</div>
<div class="line">    SAMPLE_FEATURE_NONE_BIT                  = 0x00, /**&lt; No special features */</div>
<div class="line">    SAMPLE_FEATURE_BINDLESS_BIT              = 0x01, /**&lt; Bindless resource access */</div>
<div class="line">    SAMPLE_FEATURE_GEOMETRY_SHADER_BIT       = 0x02, /**&lt; Geometry shader support */</div>
<div class="line">    SAMPLE_FEATURE_MESH_SHADER_BIT           = 0x04, /**&lt; Mesh shader support */</div>
<div class="line">    SAMPLE_FEATURE_SAMPLER_FILTER_MINMAX_BIT = 0x08, /**&lt; Min/max sampler filtering */</div>
<div class="line">    SAMPLE_FEATURE_DRAW_INDIRECT_BIT         = 0x10, /**&lt; Indirect drawing */</div>
<div class="line">    SAMPLE_FEATURE_MAX_ENUM                  = 0x7FFFFFFF /**&lt; Max value of enum (not used) */</div>
<div class="line">} sample_feature_flags_t;</div>
<div class="line">SAMPLE_FLAGS(sample_feature_flags_t)</div>
</div><!-- fragment --><h3><a class="anchor" id="attr-platform"></a>
[platform]</h3>
<p>Indicates platform-specific declarations. Format: <code>[platform(windows,linux)]</code>. Generates conditional compilation in target languages.</p>
<dl class="section warning"><dt>Warning</dt><dd>Generators currently do not implement this attribute.</dd></dl>
<h3><a class="anchor" id="attr-value"></a>
[value]</h3>
<p>Explicitly sets the numeric value for enum constants or default values for fields/arguments. Accepts expressions.</p>
<dl class="section warning"><dt>Warning</dt><dd>Currently only supports integers and enum constants.</dd></dl>
<h3><a class="anchor" id="attr-type"></a>
[type]</h3>
<p>Specifies the underlying type for declarations. Used implicitly in shorthand syntax like <code>{Float32}</code>.</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Color values.</div>
<div class="line">struct Color</div>
<div class="line">    field Red {Float32} @ Red channel clear value.</div>
<div class="line">    field Green [type(Float32)] @ Green channel clear value.</div>
</div><!-- fragment --><h3><a class="anchor" id="attr-static"></a>
[static]</h3>
<p>Marks methods or properties as class-level rather than instance-level members.</p>
<h3><a class="anchor" id="attr-ctor"></a>
[ctor]</h3>
<p>Designates a method as a constructor. Implies <code>[static]</code>. In OOP languages, enables <code>new</code> syntax:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Brief.</div>
<div class="line">interface ObjType</div>
<div class="line">    @ Creates new object instance</div>
<div class="line">    @ New instance [return]</div>
<div class="line">    method CreateByName {ObjType} [ctor]</div>
<div class="line">        arg Name {Str} @ Name of object.</div>
<div class="line"> </div>
<div class="line">    @ Creates new object instance</div>
<div class="line">    method CreateByValue {Bool} [ctor]</div>
<div class="line">        arg Name {Str} @ Name of object.</div>
<div class="line">        arg Value {Float32} @ Name of object.</div>
<div class="line">        arg Obj {ObjType} [result] @ New object instance.</div>
</div><!-- fragment --><p>In the second case, the new instance is returned as an argument:</p>
<div class="fragment"><div class="line">@c</div>
<div class="line">/**</div>
<div class="line"> * @brief     Creates new object instance</div>
<div class="line"> * @param[in] name Name of object.</div>
<div class="line"> * @return    New instance</div>
<div class="line"> */</div>
<div class="line">sample_api sample_obj_type_t</div>
<div class="line">sample_obj_type_create_by_name(sample_utf8_t name);</div>
<div class="line"> </div>
<div class="line">/**</div>
<div class="line"> * @brief      Creates new object instance</div>
<div class="line"> * @param[in]  name Name of object.</div>
<div class="line"> * @param[in]  value Name of object.</div>
<div class="line"> * @param[out] obj New object instance.</div>
<div class="line"> */</div>
<div class="line">sample_api sample_bool_t</div>
<div class="line">sample_obj_type_create_by_value(sample_utf8_t name,</div>
<div class="line">                                sample_float32_t value,</div>
<div class="line">                                sample_obj_type_t* obj);</div>
</div><!-- fragment --><p>In OOP languages ​​these methods will become constructors:</p>
<div class="fragment"><div class="line">@javascript</div>
<div class="line">const inst1 = new sample.ObjType(&#39;test&#39;);</div>
<div class="line">const inst2 = new sample.ObjType(&#39;test&#39;, 3.4);</div>
</div><!-- fragment --><h3><a class="anchor" id="attr-this"></a>
[this]</h3>
<p>Identifies the implicit instance parameter in methods. Remapped to <code>this</code>/<code>self</code> in OOP languages.</p>
<h3><a class="anchor" id="attr-get"></a>
[get]</h3>
<p>Links a property to its getter method. Format: <code>[get(GetMethodName)]</code>.</p>
<h3><a class="anchor" id="attr-set"></a>
[set]</h3>
<p>Links a property to its setter method. Format: <code>[set(SetMethodName)]</code>.</p>
<h3><a class="anchor" id="attr-handle"></a>
[handle]</h3>
<p>Declares index descriptors. Useful for providing resources with an index or other structure. For example, distributing resources linearly from a pool in games:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Handle type.</div>
<div class="line">@ This structure describes the handle template. [detail]</div>
<div class="line">struct Handle [handle]</div>
<div class="line">    field Index {Uint16} @ The type that determines the size of the handle.</div>
<div class="line"> </div>
<div class="line">handle Buffer        {Handle} @ Handle to GPU buffer resource.</div>
<div class="line">handle Texture       {Handle} @ Handle to GPU texture resource.</div>
<div class="line">handle Technique     {Handle} @ Handle to rendering technique.</div>
<div class="line">handle DescriptorSet {Handle} @ Handle to resource binding set.</div>
</div><!-- fragment --><h3><a class="anchor" id="attr-cname"></a>
[cname]</h3>
<p>Overrides the default C identifier naming:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Keyboard scancodes.</div>
<div class="line">enum Scancode</div>
<div class="line">    const Unknown @ Unidentified key.</div>
<div class="line">    const Digit0 [cname(0)] @ 0 key.</div>
<div class="line">    const Digit1 [cname(1)] @ 1 key.</div>
<div class="line">    const Digit2 [cname(2)] @ 2 key.</div>
<div class="line">    ...</div>
</div><!-- fragment --><p>C output:</p>
<div class="fragment"><div class="line">@c</div>
<div class="line">/**</div>
<div class="line"> * @brief Keyboard scancodes.</div>
<div class="line"> */</div>
<div class="line">typedef enum</div>
<div class="line">{</div>
<div class="line">    GERIUM_SCANCODE_UNKNOWN = 0, /**&lt; Unidentified key. */</div>
<div class="line">    GERIUM_SCANCODE_0       = 1, /**&lt; 0 key. */</div>
<div class="line">    GERIUM_SCANCODE_1       = 2, /**&lt; 1 key. */</div>
<div class="line">    ...</div>
</div><!-- fragment --><h3><a class="anchor" id="attr-array"></a>
[array]</h3>
<p>Indicates array:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Compilation options.</div>
<div class="line">@ This object specifies various compilation options. [detail]</div>
<div class="line">interface Options</div>
<div class="line">    prop ImportDirs [get(GetImportDirs),set(SetImportDirs)] @ Directories to search for files when importing.</div>
<div class="line"> </div>
<div class="line">    @ Returns an array of directories to search for imports.</div>
<div class="line">    @ These paths are used to search source code when an import is encountered during compilation. [detail]</div>
<div class="line">    @ {SetImportDirs} [see]</div>
<div class="line">    method GetImportDirs [const]</div>
<div class="line">        arg Options {Options} [this] @ Target options.</div>
<div class="line">        arg DirCount {Uint32} [in,out] @ Number of directories.</div>
<div class="line">        arg Dirs {Str} [result,array(DirCount)] @ Import directories.</div>
<div class="line"> </div>
<div class="line">    @ Configures directories to search for source files.</div>
<div class="line">    @ These paths are used to search source code when an import is encountered during compilation. [detail]</div>
<div class="line">    @ {GetImportDirs} [see]</div>
<div class="line">    method SetImportDirs</div>
<div class="line">        arg Options {Options} [this] @ Target options.</div>
<div class="line">        arg DirCount {Uint32} @ Number of directories.</div>
<div class="line">        arg Dirs {Str} [const,array(DirCount)] @ Import directories.</div>
</div><!-- fragment --><p>C output:</p>
<div class="fragment"><div class="line">@c</div>
<div class="line">/**</div>
<div class="line"> * @brief         Returns an array of directories to search for imports.</div>
<div class="line"> * @details       These paths are used to search source code when an import is encountered during compilation.</div>
<div class="line"> * @param[in]     options Target options.</div>
<div class="line"> * @param[in,out] dir_count Number of directories.</div>
<div class="line"> * @param[out]    dirs Import directories.</div>
<div class="line"> * @sa            ::sample_options_set_import_dirs</div>
<div class="line"> */</div>
<div class="line">sample_api void</div>
<div class="line">sample_options_get_import_dirs(sample_options_t options,</div>
<div class="line">                               sample_uint32_t* dir_count,</div>
<div class="line">                               sample_utf8_t* dirs);</div>
<div class="line"> </div>
<div class="line">/**</div>
<div class="line"> * @brief     Configures directories to search for source files.</div>
<div class="line"> * @details   These paths are used to search source code when an import is encountered during compilation.</div>
<div class="line"> * @param[in] options Target options.</div>
<div class="line"> * @param[in] dir_count Number of directories.</div>
<div class="line"> * @param[in] dirs Import directories.</div>
<div class="line"> * @sa        ::sample_options_get_import_dirs</div>
<div class="line"> */</div>
<div class="line">sample_api void</div>
<div class="line">sample_options_set_import_dirs(sample_options_t options,</div>
<div class="line">                               sample_uint32_t dir_count,</div>
<div class="line">                               const sample_utf8_t* dirs);</div>
</div><!-- fragment --><p>JavaScript use:</p>
<div class="fragment"><div class="line">@javascript</div>
<div class="line">const options = new idlc.Options;</div>
<div class="line">options.importDirs = [ &quot;path1&quot;, &quot;path2&quot;, &quot;path3&quot; ];</div>
</div><!-- fragment --><p>As you can see in higher-level languages, working with arrays becomes more native.</p>
<p>Arrays are also supported in structure fields. But fixed-length arrays are also supported in structure fields:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Brief.</div>
<div class="line">struct Test</div>
<div class="line">    field Values {Float32} [const,array(Size)] @ Values.</div>
<div class="line">    field Size {Uint32} @ Count values.</div>
<div class="line">    field Symbol {Char} [const,array(5)] @ Symbol.</div>
</div><!-- fragment --><p>C output:</p>
<div class="fragment"><div class="line">@c</div>
<div class="line">/**</div>
<div class="line"> * @brief Brief.</div>
<div class="line"> */</div>
<div class="line">typedef struct</div>
<div class="line">{</div>
<div class="line">    const sample_float32_t* values; /**&lt; Values. */</div>
<div class="line">    sample_uint32_t         size; /**&lt; Count values. */</div>
<div class="line">    sample_char_t           symbol[5]; /**&lt; Symbol. */</div>
<div class="line">} sample_test_t;</div>
</div><!-- fragment --><p>JavaScript use:</p>
<div class="fragment"><div class="line">@javascript</div>
<div class="line">func({ values: [ 3.4, 2.3 ], symbol: &#39;a&#39; });</div>
</div><!-- fragment --><h3><a class="anchor" id="attr-datasize"></a>
[datasize]</h3>
<p>Marks fields or arguments of types <code>Date</code> and <code>ConstData</code> as dimensional buffers:</p>
<dl class="section warning"><dt>Warning</dt><dd>I'm not sure yet if this attribute is necessary</dd></dl>
<h3><a class="anchor" id="attr-const"></a>
[const]</h3>
<p>Refers to immutable fields, parameters, or methods that do not change the state of the instance.</p>
<h3><a class="anchor" id="attr-ref"></a>
[ref]</h3>
<p>Hints that a field or argument should be passed by reference rather than by value.</p>
<h3><a class="anchor" id="attr-refinc"></a>
[refinc]</h3>
<p>Marks a method as a specific method for reference counter incrementing.</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Compilation options.</div>
<div class="line">@ This object specifies various compilation options. [detail]</div>
<div class="line">interface Options</div>
<div class="line">    @ Increments reference count.</div>
<div class="line">    @ Manages options instance lifetime. [detail]</div>
<div class="line">    @ Reference to same options. [return]</div>
<div class="line">    @ {Destroy} [see]</div>
<div class="line">    method Reference {Options} [refinc]</div>
<div class="line">        arg Options {Options} [this] @ Target options instance.</div>
<div class="line"> </div>
<div class="line">    @ Releases options instance.</div>
<div class="line">    @ Destroys when reference count reaches zero. [detail]</div>
<div class="line">    @ {Reference} [see]</div>
<div class="line">    method Destroy [destroy]</div>
<div class="line">        arg Options {Options} [this] @ Options to destroy.</div>
</div><!-- fragment --><p>High-level languages ​​will manage the lifetime of an object either through the garbage collector or automatically through this method (the method itself will be hidden).</p>
<h3><a class="anchor" id="attr-userdata"></a>
[userdata]</h3>
<p>Marks parameters for passing context data to callbacks.</p>
<p>In high-level languages ​​it will be removed, the generator will use it automatically for data closure.</p>
<h3><a class="anchor" id="attr-errorcode"></a>
[errorcode]</h3>
<p>Designates enums as error code containers. Enables special error handling.</p>
<p>You can also mark the function. Read about it in the <a class="el" href="#error-handling">Error Handling</a> section</p>
<h3><a class="anchor" id="attr-noerror"></a>
[noerror]</h3>
<p>Marks an enum constant as not an error.</p>
<h3><a class="anchor" id="attr-result"></a>
[result]</h3>
<p>Marks the argument as the return value. Higher priority than the return value (unless it is an enumeration with error codes).</p>
<h3><a class="anchor" id="attr-destroy"></a>
[destroy]</h3>
<p>Marks resource cleanup methods.</p>
<h3><a class="anchor" id="attr-in"></a>
[in]</h3>
<p>Input-only parameters (default). Helps with code generation for <code>[out]</code> pairs.</p>
<h3><a class="anchor" id="attr-out"></a>
[out]</h3>
<p>Output parameters.</p>
<h3><a class="anchor" id="attr-optional"></a>
[optional]</h3>
<p>Marks nullable parameters. Generates different signatures in strict languages.</p>
<h3><a class="anchor" id="attr-tokenizer"></a>
[tokenizer]</h3>
<p>Overrides default name tokenization rules for specific declarations.</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Keyboard scancodes.</div>
<div class="line">enum Scancode</div>
<div class="line">    const F1 [tokenizer(0)] @ F1 function key.</div>
<div class="line">    const BC1RgbSrgb [tokenizer(3-3)] @ block-compressed format</div>
<div class="line">    const PVRTC2v2BppSrgb [tokenizer(6-^1-4)] @ PVRTC compressed format </div>
</div><!-- fragment --><p>In this example, the names will be tokenized as follows:</p><ul>
<li><code>F1</code>;</li>
<li><code>BC1 Rgb Srgb</code>;</li>
<li><code>PVRTC2 2Bpp Srgb</code>.</li>
</ul>
<p>The number in the tokenizer indicates how many characters to take as a token. Numbers are separated by hyphens. If there is <code>^</code> before the number, it indicates how many characters to skip.</p>
<h3><a class="anchor" id="attr-version"></a>
[version]</h3>
<p>Specifies API versioning. Format: [version(major,minor,micro)].</p>
<h3><a class="anchor" id="attr-brief"></a>
[brief]</h3>
<p>Short description attribute (default for standalone <code>@ docs</code>).</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Logging severity levels.</div>
<div class="line">enum LoggerLevel</div>
<div class="line">    ...</div>
<div class="line"> </div>
<div class="line">// or</div>
<div class="line"> </div>
<div class="line">@ Logging severity levels. [brief]</div>
<div class="line">enum LoggerLevel</div>
<div class="line">    ...</div>
</div><!-- fragment --><h3><a class="anchor" id="attr-detail"></a>
[detail]</h3>
<p>Detailed description attribute (default for inline <code>@ docs</code>).</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Logging severity levels. [detail]</div>
<div class="line">enum LoggerLevel</div>
<div class="line">    ...</div>
<div class="line"> </div>
<div class="line">// or</div>
<div class="line"> </div>
<div class="line">enum LoggerLevel @ Logging severity levels. [detail]</div>
<div class="line">    ...</div>
<div class="line">    </div>
<div class="line">// or</div>
<div class="line"> </div>
<div class="line">enum LoggerLevel @ Logging severity levels.</div>
<div class="line">    ...</div>
</div><!-- fragment --><h3><a class="anchor" id="attr-author"></a>
[author]</h3>
<p>Credits the original author:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ IDLC</div>
<div class="line">@ Author Name &lt;authorname@email.com&gt; [author]</div>
<div class="line">api Idl</div>
</div><!-- fragment --><h3><a class="anchor" id="attr-see"></a>
[see]</h3>
<p>See also:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Callback to get sources.</div>
<div class="line">@ If the callback allocates memory, then you can free it in the callback {ReleaseImportCallback}. [see]</div>
<div class="line">callback ImportCallback {Source} [ref,optional]</div>
<div class="line">    ...</div>
</div><!-- fragment --><h3><a class="anchor" id="attr-note"></a>
[note]</h3>
<p>Highlights important usage notes in documentation.</p>
<h3><a class="anchor" id="attr-warning"></a>
[warning]</h3>
<p>Marks warnings in documentation.</p>
<h3><a class="anchor" id="attr-copyright"></a>
[copyright]</h3>
<p>Copyright notice:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ IDLC</div>
<div class="line">@ MIT License [copyright]</div>
<div class="line">api Idl</div>
</div><!-- fragment --><h3><a class="anchor" id="attr-license"></a>
[license]</h3>
<p>License text.</p>
<h3><a class="anchor" id="attr-return"></a>
[return]</h3>
<p>Documents the semantics of the return value from a method/function/callback.</p>
<h2><a class="anchor" id="error-handling"></a>
Error Handling</h2>
<p>The language provides special facilities for cross-language error handling. This is necessary because C lacks exceptions and typically uses error codes, while JS has exceptions. Therefore, IDL offers a built-in way to describe errors that works natively across all target languages.</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">@ Result codes.</div>
<div class="line">@ Enumeration of result codes. [detail]</div>
<div class="line">enum Result [errorcode]</div>
<div class="line">    const Success [noerror] @ Indicates success (this is not an error).</div>
<div class="line">    const ErrorUnknown @ Unknown error.</div>
<div class="line">    const ErrorOutOfMemory @ Out of memory.</div>
<div class="line">    const ErrorInvalidArg @ Invalid argument.</div>
<div class="line">    const ErrorFileCreate @ Failed to create file.</div>
<div class="line">    const ErrorCompilation @ Compilation failed.</div>
<div class="line">    const ErrorNotSupported @ Not supporeted.</div>
<div class="line"> </div>
<div class="line">@ Converts error code to descriptive string.</div>
<div class="line">@ Provides a text description for the result code. [detail]</div>
<div class="line">@ Corresponding text description of the result code. [return]</div>
<div class="line">func ResultToString {Str} [errorcode]</div>
<div class="line">    arg Result {Result} @ Result code.</div>
<div class="line"> </div>
<div class="line">@ Compilation options.</div>
<div class="line">@ This object specifies various compilation options. [detail]</div>
<div class="line">interface Options</div>
<div class="line">    @ Creates new options instance.</div>
<div class="line">    @ Creates an object for setting compiler options. [detail]</div>
<div class="line">    @ New options instance. [return]</div>
<div class="line">    method Create {Result} [ctor]</div>
<div class="line">        arg Options {Options} [result] @ New options instance.</div>
</div><!-- fragment --><p>Note that the <code>Create</code> method returns a new instance via an argument. This is quite normal, because the programmer will not be able to ignore the object allocation. Instead, the return value is an error code.</p>
<p>In C, this would look like this:</p>
<div class="fragment"><div class="line">@c</div>
<div class="line">/**</div>
<div class="line"> * @brief      Creates new options instance.</div>
<div class="line"> * @details    Creates an object for setting compiler options.</div>
<div class="line"> * @param[out] options New options instance.</div>
<div class="line"> * @return     New options instance.</div>
<div class="line"> * @ingroup    functions</div>
<div class="line"> */</div>
<div class="line">idl_api idl_result_t</div>
<div class="line">idl_options_create(idl_options_t* options);</div>
</div><!-- fragment --><p>Which can be used as:</p>
<div class="fragment"><div class="line">@c</div>
<div class="line">idl_options_t options;</div>
<div class="line">idl_result_t code = idl_options_create(&amp;options);</div>
<div class="line">if (code != IDL_RESULT_SUCCESS) {</div>
<div class="line">    printf(&quot;%s\n&quot;, idl_result_to_string(code));</div>
<div class="line">    return;</div>
<div class="line">}</div>
<div class="line">idl_options_destroy(options);</div>
</div><!-- fragment --><p>In languages ​​with exceptions, when calling functions/methods if an error code is returned (in any way), in case of an error an exception will be thrown with the text of the error constant name. If there is a function marked <code>[errorcode]</code>:</p>
<div class="fragment"><div class="line">@idl</div>
<div class="line">func ResultToString {Str} [errorcode]</div>
</div><!-- fragment --><p>Then it will be used to convert the error code into a text message for the exception.</p>
<p>JavaScript:</p>
<div class="fragment"><div class="line">@javascript</div>
<div class="line">const options = new module.Options;</div>
</div><!-- fragment --><p>If the object cannot be created, an exception will be thrown.</p>
<h2><a class="anchor" id="learn-how-to-install"></a>
Next Steps</h2>
<p>Learn how to install and use the compiler.</p>
<div class="section_buttons"></div><div class="section_buttons"><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Previous   </th><th class="markdownTableHeadRight">Next    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a href="quick-start.html">Quick Start</a>   </td><td class="markdownTableBodyRight"><a href="embedded-compiler.html">Embedded Compiler</a>   </td></tr>
</table>
</div><div class="section_buttons"></div> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<script type="text/javascript">
    DoxygenHighlight.apply()
</script>
<!-- HTML footer for doxygen 1.12.0-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer" style="float:left;"><a href="https://github.com/VladimirShaleev/idlc">GitHub Repository</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
